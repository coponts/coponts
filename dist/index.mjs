import Rs from"node:readline";import gr from"tty";import Fs from"readline";import Q from"events";import ne from"util";import we from"fs";import $s from"net";import vt from"crypto";import vr from"url";import de from"path";import ks from"os";import Ps from"buffer";import Bs from"http";import Ms from"https";import oe from"node:fs";import"node:https";import Er from"node:os";import pe from"node:path";import yr from"zlib";import Us from"child_process";var De=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Se(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Hs(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}function Et(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yt={exports:{}};let br=process.argv||[],Ge=process.env,js=!("NO_COLOR"in Ge||br.includes("--no-color"))&&("FORCE_COLOR"in Ge||br.includes("--color")||process.platform==="win32"||Et!=null&&gr.isatty(1)&&Ge.TERM!=="dumb"||"CI"in Ge),Gs=(t,e,r=t)=>i=>{let s=""+i,n=s.indexOf(e,t.length);return~n?t+qs(s,e,r,n)+e:t+s+e},qs=(t,e,r,i)=>{let s="",n=0;do s+=t.substring(n,i)+r,n=i+e.length,i=t.indexOf(e,n);while(~i);return s+t.substring(n)},wr=(t=js)=>{let e=t?Gs:()=>String;return{isColorSupported:t,reset:e("\x1B[0m","\x1B[0m"),bold:e("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:e("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:e("\x1B[3m","\x1B[23m"),underline:e("\x1B[4m","\x1B[24m"),inverse:e("\x1B[7m","\x1B[27m"),hidden:e("\x1B[8m","\x1B[28m"),strikethrough:e("\x1B[9m","\x1B[29m"),black:e("\x1B[30m","\x1B[39m"),red:e("\x1B[31m","\x1B[39m"),green:e("\x1B[32m","\x1B[39m"),yellow:e("\x1B[33m","\x1B[39m"),blue:e("\x1B[34m","\x1B[39m"),magenta:e("\x1B[35m","\x1B[39m"),cyan:e("\x1B[36m","\x1B[39m"),white:e("\x1B[37m","\x1B[39m"),gray:e("\x1B[90m","\x1B[39m"),bgBlack:e("\x1B[40m","\x1B[49m"),bgRed:e("\x1B[41m","\x1B[49m"),bgGreen:e("\x1B[42m","\x1B[49m"),bgYellow:e("\x1B[43m","\x1B[49m"),bgBlue:e("\x1B[44m","\x1B[49m"),bgMagenta:e("\x1B[45m","\x1B[49m"),bgCyan:e("\x1B[46m","\x1B[49m"),bgWhite:e("\x1B[47m","\x1B[49m"),blackBright:e("\x1B[90m","\x1B[39m"),redBright:e("\x1B[91m","\x1B[39m"),greenBright:e("\x1B[92m","\x1B[39m"),yellowBright:e("\x1B[93m","\x1B[39m"),blueBright:e("\x1B[94m","\x1B[39m"),magentaBright:e("\x1B[95m","\x1B[39m"),cyanBright:e("\x1B[96m","\x1B[39m"),whiteBright:e("\x1B[97m","\x1B[39m"),bgBlackBright:e("\x1B[100m","\x1B[49m"),bgRedBright:e("\x1B[101m","\x1B[49m"),bgGreenBright:e("\x1B[102m","\x1B[49m"),bgYellowBright:e("\x1B[103m","\x1B[49m"),bgBlueBright:e("\x1B[104m","\x1B[49m"),bgMagentaBright:e("\x1B[105m","\x1B[49m"),bgCyanBright:e("\x1B[106m","\x1B[49m"),bgWhiteBright:e("\x1B[107m","\x1B[49m")}};yt.exports=wr(),yt.exports.createColors=wr;var ee=yt.exports;const Ws=Se(ee);var Sr={};const{FORCE_COLOR:Zs,NODE_DISABLE_COLORS:zs,TERM:Vs}=process.env,N={enabled:!zs&&Vs!=="dumb"&&Zs!=="0",reset:F(0,0),bold:F(1,22),dim:F(2,22),italic:F(3,23),underline:F(4,24),inverse:F(7,27),hidden:F(8,28),strikethrough:F(9,29),black:F(30,39),red:F(31,39),green:F(32,39),yellow:F(33,39),blue:F(34,39),magenta:F(35,39),cyan:F(36,39),white:F(37,39),gray:F(90,39),grey:F(90,39),bgBlack:F(40,49),bgRed:F(41,49),bgGreen:F(42,49),bgYellow:F(43,49),bgBlue:F(44,49),bgMagenta:F(45,49),bgCyan:F(46,49),bgWhite:F(47,49)};function _r(t,e){let r=0,i,s="",n="";for(;r<t.length;r++)i=t[r],s+=i.open,n+=i.close,e.includes(i.close)&&(e=e.replace(i.rgx,i.close+i.open));return s+e+n}function Ks(t,e){let r={has:t,keys:e};return r.reset=N.reset.bind(r),r.bold=N.bold.bind(r),r.dim=N.dim.bind(r),r.italic=N.italic.bind(r),r.underline=N.underline.bind(r),r.inverse=N.inverse.bind(r),r.hidden=N.hidden.bind(r),r.strikethrough=N.strikethrough.bind(r),r.black=N.black.bind(r),r.red=N.red.bind(r),r.green=N.green.bind(r),r.yellow=N.yellow.bind(r),r.blue=N.blue.bind(r),r.magenta=N.magenta.bind(r),r.cyan=N.cyan.bind(r),r.white=N.white.bind(r),r.gray=N.gray.bind(r),r.grey=N.grey.bind(r),r.bgBlack=N.bgBlack.bind(r),r.bgRed=N.bgRed.bind(r),r.bgGreen=N.bgGreen.bind(r),r.bgYellow=N.bgYellow.bind(r),r.bgBlue=N.bgBlue.bind(r),r.bgMagenta=N.bgMagenta.bind(r),r.bgCyan=N.bgCyan.bind(r),r.bgWhite=N.bgWhite.bind(r),r}function F(t,e){let r={open:`\x1B[${t}m`,close:`\x1B[${e}m`,rgx:new RegExp(`\\x1b\\[${e}m`,"g")};return function(i){return this!==void 0&&this.has!==void 0?(this.has.includes(t)||(this.has.push(t),this.keys.push(r)),i===void 0?this:N.enabled?_r(this.keys,i+""):i+""):i===void 0?Ks([t],[r]):N.enabled?_r([r],i+""):i+""}}var z=N,Ys=(t,e)=>{if(!(t.meta&&t.name!=="escape")){if(t.ctrl){if(t.name==="a")return"first";if(t.name==="c"||t.name==="d")return"abort";if(t.name==="e")return"last";if(t.name==="g")return"reset"}if(e){if(t.name==="j")return"down";if(t.name==="k")return"up"}return t.name==="return"||t.name==="enter"?"submit":t.name==="backspace"?"delete":t.name==="delete"?"deleteForward":t.name==="abort"?"abort":t.name==="escape"?"exit":t.name==="tab"?"next":t.name==="pagedown"?"nextPage":t.name==="pageup"?"prevPage":t.name==="home"?"home":t.name==="end"?"end":t.name==="up"?"up":t.name==="down"?"down":t.name==="right"?"right":t.name==="left"?"left":!1}},bt=t=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),r=new RegExp(e,"g");return typeof t=="string"?t.replace(r,""):t};const wt="\x1B",$=`${wt}[`,Xs="\x07",St={to(t,e){return e?`${$}${e+1};${t+1}H`:`${$}${t+1}G`},move(t,e){let r="";return t<0?r+=`${$}${-t}D`:t>0&&(r+=`${$}${t}C`),e<0?r+=`${$}${-e}A`:e>0&&(r+=`${$}${e}B`),r},up:(t=1)=>`${$}${t}A`,down:(t=1)=>`${$}${t}B`,forward:(t=1)=>`${$}${t}C`,backward:(t=1)=>`${$}${t}D`,nextLine:(t=1)=>`${$}E`.repeat(t),prevLine:(t=1)=>`${$}F`.repeat(t),left:`${$}G`,hide:`${$}?25l`,show:`${$}?25h`,save:`${wt}7`,restore:`${wt}8`},Js={up:(t=1)=>`${$}S`.repeat(t),down:(t=1)=>`${$}T`.repeat(t)},Qs={screen:`${$}2J`,up:(t=1)=>`${$}1J`.repeat(t),down:(t=1)=>`${$}J`.repeat(t),line:`${$}2K`,lineEnd:`${$}K`,lineStart:`${$}1K`,lines(t){let e="";for(let r=0;r<t;r++)e+=this.line+(r<t-1?St.up():"");return t&&(e+=St.left),e}};var V={cursor:St,scroll:Js,erase:Qs,beep:Xs};const en=bt,{erase:Cr,cursor:tn}=V,rn=t=>[...en(t)].length;var sn=function(t,e){if(!e)return Cr.line+tn.to(0);let r=0;const i=t.split(/\r?\n/);for(let s of i)r+=1+Math.floor(Math.max(rn(s)-1,0)/e);return Cr.lines(r)};const Le={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},nn={arrowUp:Le.arrowUp,arrowDown:Le.arrowDown,arrowLeft:Le.arrowLeft,arrowRight:Le.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},on=process.platform==="win32"?nn:Le;var xr=on;const _e=z,me=xr,_t=Object.freeze({password:{scale:1,render:t=>"*".repeat(t.length)},emoji:{scale:2,render:t=>"\u{1F603}".repeat(t.length)},invisible:{scale:0,render:t=>""},default:{scale:1,render:t=>`${t}`}}),an=t=>_t[t]||_t.default,Ne=Object.freeze({aborted:_e.red(me.cross),done:_e.green(me.tick),exited:_e.yellow(me.cross),default:_e.cyan("?")}),cn=(t,e,r)=>e?Ne.aborted:r?Ne.exited:t?Ne.done:Ne.default,ln=t=>_e.gray(t?me.ellipsis:me.pointerSmall),hn=(t,e)=>_e.gray(t?e?me.pointerSmall:"+":me.line);var un={styles:_t,render:an,symbols:Ne,symbol:cn,delimiter:ln,item:hn};const fn=bt;var dn=function(t,e){let r=String(fn(t)||"").split(/\r?\n/);return e?r.map(i=>Math.ceil(i.length/e)).reduce((i,s)=>i+s):r.length},pn=(t,e={})=>{const r=Number.isSafeInteger(parseInt(e.margin))?new Array(parseInt(e.margin)).fill(" ").join(""):e.margin||"",i=e.width;return(t||"").split(/\r?\n/g).map(s=>s.split(/\s+/g).reduce((n,o)=>(o.length+r.length>=i||n[n.length-1].length+o.length+1<i?n[n.length-1]+=` ${o}`:n.push(`${r}${o}`),n),[r]).join(`
`)).join(`
`)},mn=(t,e,r)=>{r=r||e;let i=Math.min(e-r,t-Math.floor(r/2));i<0&&(i=0);let s=Math.min(i+r,e);return{startIndex:i,endIndex:s}},Y={action:Ys,clear:sn,style:un,strip:bt,figures:xr,lines:dn,wrap:pn,entriesToDisplay:mn};const Ir=Fs,{action:gn}=Y,vn=Q,{beep:En,cursor:yn}=V,bn=z;let wn=class extends vn{constructor(e={}){super(),this.firstRender=!0,this.in=e.stdin||process.stdin,this.out=e.stdout||process.stdout,this.onRender=(e.onRender||(()=>{})).bind(this);const r=Ir.createInterface({input:this.in,escapeCodeTimeout:50});Ir.emitKeypressEvents(this.in,r),this.in.isTTY&&this.in.setRawMode(!0);const i=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,s=(n,o)=>{let u=gn(o,i);u===!1?this._&&this._(n,o):typeof this[u]=="function"?this[u](o):this.bell()};this.close=()=>{this.out.write(yn.show),this.in.removeListener("keypress",s),this.in.isTTY&&this.in.setRawMode(!1),r.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",s)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(En)}render(){this.onRender(bn),this.firstRender&&(this.firstRender=!1)}};var ae=wn;const qe=z,Sn=ae,{erase:_n,cursor:Re}=V,{style:Ct,clear:xt,lines:Cn,figures:xn}=Y;class In extends Sn{constructor(e={}){super(e),this.transform=Ct.render(e.style),this.scale=this.transform.scale,this.msg=e.message,this.initial=e.initial||"",this.validator=e.validate||(()=>!0),this.value="",this.errorMsg=e.error||"Please Enter A Valid Value",this.cursor=+!!this.initial,this.cursorOffset=0,this.clear=xt("",this.out.columns),this.render()}set value(e){!e&&this.initial?(this.placeholder=!0,this.rendered=qe.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(e)),this._value=e,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=+!!this.initial,this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let e=await this.validator(this.value);typeof e=="string"&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(e){this.placeholder||(this.cursor=this.cursor+e,this.cursorOffset+=e)}_(e,r){let i=this.value.slice(0,this.cursor),s=this.value.slice(this.cursor);this.value=`${i}${e}${s}`,this.red=!1,this.cursor=this.placeholder?0:i.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let e=this.value.slice(0,this.cursor-1),r=this.value.slice(this.cursor);this.value=`${e}${r}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let e=this.value.slice(0,this.cursor),r=this.value.slice(this.cursor+1);this.value=`${e}${r}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(Re.down(Cn(this.outputError,this.out.columns)-1)+xt(this.outputError,this.out.columns)),this.out.write(xt(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[Ct.symbol(this.done,this.aborted),qe.bold(this.msg),Ct.delimiter(this.done),this.red?qe.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((e,r,i)=>e+`
${i?" ":xn.pointerSmall} ${qe.red().italic(r)}`,"")),this.out.write(_n.line+Re.to(0)+this.outputText+Re.save+this.outputError+Re.restore+Re.move(this.cursorOffset,0)))}}var On=In;const te=z,An=ae,{style:Or,clear:Ar,figures:We,wrap:Tn,entriesToDisplay:Dn}=Y,{cursor:Ln}=V;class Nn extends An{constructor(e={}){super(e),this.msg=e.message,this.hint=e.hint||"- Use arrow-keys. Return to submit.",this.warn=e.warn||"- This option is disabled",this.cursor=e.initial||0,this.choices=e.choices.map((r,i)=>(typeof r=="string"&&(r={title:r,value:i}),{title:r&&(r.title||r.value||r),value:r&&(r.value===void 0?i:r.value),description:r&&r.description,selected:r&&r.selected,disabled:r&&r.disabled})),this.optionsPerPage=e.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=Ar("",this.out.columns),this.render()}moveCursor(e){this.cursor=e,this.value=this.choices[e].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(e,r){if(e===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(Ln.hide):this.out.write(Ar(this.outputText,this.out.columns)),super.render();let{startIndex:e,endIndex:r}=Dn(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[Or.symbol(this.done,this.aborted),te.bold(this.msg),Or.delimiter(!1),this.done?this.selection.title:this.selection.disabled?te.yellow(this.warn):te.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let i=e;i<r;i++){let s,n,o="",u=this.choices[i];i===e&&e>0?n=We.arrowUp:i===r-1&&r<this.choices.length?n=We.arrowDown:n=" ",u.disabled?(s=this.cursor===i?te.gray().underline(u.title):te.strikethrough().gray(u.title),n=(this.cursor===i?te.bold().gray(We.pointer)+" ":"  ")+n):(s=this.cursor===i?te.cyan().underline(u.title):u.title,n=(this.cursor===i?te.cyan(We.pointer)+" ":"  ")+n,u.description&&this.cursor===i&&(o=` - ${u.description}`,(n.length+s.length+o.length>=this.out.columns||u.description.split(/\r?\n/).length>1)&&(o=`
`+Tn(u.description,{margin:3,width:this.out.columns})))),this.outputText+=`${n} ${s}${te.gray(o)}
`}}this.out.write(this.outputText)}}var Rn=Nn;const Ze=z,Fn=ae,{style:Tr,clear:$n}=Y,{cursor:Dr,erase:kn}=V;class Pn extends Fn{constructor(e={}){super(e),this.msg=e.message,this.value=!!e.initial,this.active=e.active||"on",this.inactive=e.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(e,r){if(e===" ")this.value=!this.value;else if(e==="1")this.value=!0;else if(e==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(Dr.hide):this.out.write($n(this.outputText,this.out.columns)),super.render(),this.outputText=[Tr.symbol(this.done,this.aborted),Ze.bold(this.msg),Tr.delimiter(this.done),this.value?this.inactive:Ze.cyan().underline(this.inactive),Ze.gray("/"),this.value?Ze.cyan().underline(this.active):this.active].join(" "),this.out.write(kn.line+Dr.to(0)+this.outputText))}}var Bn=Pn;let Mn=class ur{constructor({token:e,date:r,parts:i,locales:s}){this.token=e,this.date=r||new Date,this.parts=i||[this],this.locales=s||{}}up(){}down(){}next(){const e=this.parts.indexOf(this);return this.parts.find((r,i)=>i>e&&r instanceof ur)}setTo(e){}prev(){let e=[].concat(this.parts).reverse();const r=e.indexOf(this);return e.find((i,s)=>s>r&&i instanceof ur)}toString(){return String(this.date)}};var re=Mn;const Un=re;let Hn=class extends Un{constructor(e={}){super(e)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let e=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?e.toUpperCase():e}};var jn=Hn;const Gn=re,qn=t=>(t=t%10,t===1?"st":t===2?"nd":t===3?"rd":"th");let Wn=class extends Gn{constructor(e={}){super(e)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(e){this.date.setDate(parseInt(e.substr(-2)))}toString(){let e=this.date.getDate(),r=this.date.getDay();return this.token==="DD"?String(e).padStart(2,"0"):this.token==="Do"?e+qn(e):this.token==="d"?r+1:this.token==="ddd"?this.locales.weekdaysShort[r]:this.token==="dddd"?this.locales.weekdays[r]:e}};var Zn=Wn;const zn=re;let Vn=class extends zn{constructor(e={}){super(e)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(e){this.date.setHours(parseInt(e.substr(-2)))}toString(){let e=this.date.getHours();return/h/.test(this.token)&&(e=e%12||12),this.token.length>1?String(e).padStart(2,"0"):e}};var Kn=Vn;const Yn=re;let Xn=class extends Yn{constructor(e={}){super(e)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(e){this.date.setMilliseconds(parseInt(e.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}};var Jn=Xn;const Qn=re;let eo=class extends Qn{constructor(e={}){super(e)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(e){this.date.setMinutes(parseInt(e.substr(-2)))}toString(){let e=this.date.getMinutes();return this.token.length>1?String(e).padStart(2,"0"):e}};var to=eo;const ro=re;let io=class extends ro{constructor(e={}){super(e)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(e){e=parseInt(e.substr(-2))-1,this.date.setMonth(e<0?0:e)}toString(){let e=this.date.getMonth(),r=this.token.length;return r===2?String(e+1).padStart(2,"0"):r===3?this.locales.monthsShort[e]:r===4?this.locales.months[e]:String(e+1)}};var so=io;const no=re;let oo=class extends no{constructor(e={}){super(e)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(e){this.date.setSeconds(parseInt(e.substr(-2)))}toString(){let e=this.date.getSeconds();return this.token.length>1?String(e).padStart(2,"0"):e}};var ao=oo;const co=re;let lo=class extends co{constructor(e={}){super(e)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(e){this.date.setFullYear(e.substr(-4))}toString(){let e=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?e.substr(-2):e}};var ho=lo,uo={DatePart:re,Meridiem:jn,Day:Zn,Hours:Kn,Milliseconds:Jn,Minutes:to,Month:so,Seconds:ao,Year:ho};const It=z,fo=ae,{style:Lr,clear:Nr,figures:po}=Y,{erase:mo,cursor:Rr}=V,{DatePart:Fr,Meridiem:go,Day:vo,Hours:Eo,Milliseconds:yo,Minutes:bo,Month:wo,Seconds:So,Year:_o}=uo,Co=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,$r={1:({token:t})=>t.replace(/\\(.)/g,"$1"),2:t=>new vo(t),3:t=>new wo(t),4:t=>new _o(t),5:t=>new go(t),6:t=>new Eo(t),7:t=>new bo(t),8:t=>new So(t),9:t=>new yo(t)},xo={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class Io extends fo{constructor(e={}){super(e),this.msg=e.message,this.cursor=0,this.typed="",this.locales=Object.assign(xo,e.locales),this._date=e.initial||new Date,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.mask=e.mask||"YYYY-MM-DD HH:mm:ss",this.clear=Nr("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(e){e&&this._date.setTime(e.getTime())}set mask(e){let r;for(this.parts=[];r=Co.exec(e);){let s=r.shift(),n=r.findIndex(o=>o!=null);this.parts.push(n in $r?$r[n]({token:r[n]||s,date:this.date,parts:this.parts,locales:this.locales}):r[n]||s)}let i=this.parts.reduce((s,n)=>(typeof n=="string"&&typeof s[s.length-1]=="string"?s[s.length-1]+=n:s.push(n),s),[]);this.parts.splice(0),this.parts.push(...i),this.reset()}moveCursor(e){this.typed="",this.cursor=e,this.fire()}reset(){this.moveCursor(this.parts.findIndex(e=>e instanceof Fr)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let e=await this.validator(this.value);typeof e=="string"&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let e=this.parts[this.cursor].prev();if(e==null)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}right(){let e=this.parts[this.cursor].next();if(e==null)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}next(){let e=this.parts[this.cursor].next();this.moveCursor(e?this.parts.indexOf(e):this.parts.findIndex(r=>r instanceof Fr)),this.render()}_(e){/\d/.test(e)&&(this.typed+=e,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(Rr.hide):this.out.write(Nr(this.outputText,this.out.columns)),super.render(),this.outputText=[Lr.symbol(this.done,this.aborted),It.bold(this.msg),Lr.delimiter(!1),this.parts.reduce((e,r,i)=>e.concat(i===this.cursor&&!this.done?It.cyan().underline(r.toString()):r),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((e,r,i)=>e+`
${i?" ":po.pointerSmall} ${It.red().italic(r)}`,"")),this.out.write(mo.line+Rr.to(0)+this.outputText))}}var Oo=Io;const ze=z,Ao=ae,{cursor:Ve,erase:To}=V,{style:Ot,figures:Do,clear:kr,lines:Lo}=Y,No=/[0-9]/,At=t=>t!==void 0,Pr=(t,e)=>{let r=Math.pow(10,e);return Math.round(t*r)/r};class Ro extends Ao{constructor(e={}){super(e),this.transform=Ot.render(e.style),this.msg=e.message,this.initial=At(e.initial)?e.initial:"",this.float=!!e.float,this.round=e.round||2,this.inc=e.increment||1,this.min=At(e.min)?e.min:-1/0,this.max=At(e.max)?e.max:1/0,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(e){!e&&e!==0?(this.placeholder=!0,this.rendered=ze.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${Pr(e,this.round)}`),this._value=Pr(e,this.round)),this.fire()}get value(){return this._value}parse(e){return this.float?parseFloat(e):parseInt(e)}valid(e){return e==="-"||e==="."&&this.float||No.test(e)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let e=this.value;this.value=e!==""?e:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let e=await this.validator(this.value);typeof e=="string"&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let e=this.value;this.value=e!==""?e:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let e=this.value.toString();if(e.length===0)return this.bell();this.value=this.parse(e=e.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(e,r){if(!this.valid(e))return this.bell();const i=Date.now();if(i-this.lastHit>1e3&&(this.typed=""),this.typed+=e,this.lastHit=i,this.color="cyan",e===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(Ve.down(Lo(this.outputError,this.out.columns)-1)+kr(this.outputError,this.out.columns)),this.out.write(kr(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[Ot.symbol(this.done,this.aborted),ze.bold(this.msg),Ot.delimiter(this.done),!this.done||!this.done&&!this.placeholder?ze[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((e,r,i)=>e+`
${i?" ":Do.pointerSmall} ${ze.red().italic(r)}`,"")),this.out.write(To.line+Ve.to(0)+this.outputText+Ve.save+this.outputError+Ve.restore))}}var Fo=Ro;const X=z,{cursor:$o}=V,ko=ae,{clear:Br,figures:ce,style:Mr,wrap:Po,entriesToDisplay:Bo}=Y;let Mo=class extends ko{constructor(e={}){super(e),this.msg=e.message,this.cursor=e.cursor||0,this.scrollIndex=e.cursor||0,this.hint=e.hint||"",this.warn=e.warn||"- This option is disabled -",this.minSelected=e.min,this.showMinError=!1,this.maxChoices=e.max,this.instructions=e.instructions,this.optionsPerPage=e.optionsPerPage||10,this.value=e.choices.map((r,i)=>(typeof r=="string"&&(r={title:r,value:i}),{title:r&&(r.title||r.value||r),description:r&&r.description,value:r&&(r.value===void 0?i:r.value),selected:r&&r.selected,disabled:r&&r.disabled})),this.clear=Br("",this.out.columns),e.overrideRender||this.render()}reset(){this.value.map(e=>!e.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(e=>e.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const e=this.value.filter(r=>r.selected);this.minSelected&&e.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const e=this.value[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter(r=>r.selected).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const e=!this.value[this.cursor].selected;this.value.filter(r=>!r.disabled).forEach(r=>r.selected=e),this.render()}_(e,r){if(e===" ")this.handleSpaceToggle();else if(e==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${ce.arrowUp}/${ce.arrowDown}: Highlight option
    ${ce.arrowLeft}/${ce.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(e,r,i,s){const n=(r.selected?X.green(ce.radioOn):ce.radioOff)+" "+s+" ";let o,u;return r.disabled?o=e===i?X.gray().underline(r.title):X.strikethrough().gray(r.title):(o=e===i?X.cyan().underline(r.title):r.title,e===i&&r.description&&(u=` - ${r.description}`,(n.length+o.length+u.length>=this.out.columns||r.description.split(/\r?\n/).length>1)&&(u=`
`+Po(r.description,{margin:n.length,width:this.out.columns})))),n+o+X.gray(u||"")}paginateOptions(e){if(e.length===0)return X.red("No matches for this query.");let{startIndex:r,endIndex:i}=Bo(this.cursor,e.length,this.optionsPerPage),s,n=[];for(let o=r;o<i;o++)o===r&&r>0?s=ce.arrowUp:o===i-1&&i<e.length?s=ce.arrowDown:s=" ",n.push(this.renderOption(this.cursor,e[o],o,s));return`
`+n.join(`
`)}renderOptions(e){return this.done?"":this.paginateOptions(e)}renderDoneOrInstructions(){if(this.done)return this.value.filter(r=>r.selected).map(r=>r.title).join(", ");const e=[X.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&e.push(X.yellow(this.warn)),e.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write($o.hide),super.render();let e=[Mr.symbol(this.done,this.aborted),X.bold(this.msg),Mr.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(e+=X.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),e+=this.renderOptions(this.value),this.out.write(this.clear+e),this.clear=Br(e,this.out.columns)}};var Ur=Mo;const Fe=z,Uo=ae,{erase:Ho,cursor:Hr}=V,{style:Tt,clear:jr,figures:Dt,wrap:jo,entriesToDisplay:Go}=Y,Gr=(t,e)=>t[e]&&(t[e].value||t[e].title||t[e]),qo=(t,e)=>t[e]&&(t[e].title||t[e].value||t[e]),Wo=(t,e)=>{const r=t.findIndex(i=>i.value===e||i.title===e);return r>-1?r:void 0};class Zo extends Uo{constructor(e={}){super(e),this.msg=e.message,this.suggest=e.suggest,this.choices=e.choices,this.initial=typeof e.initial=="number"?e.initial:Wo(e.choices,e.initial),this.select=this.initial||e.cursor||0,this.i18n={noMatches:e.noMatches||"no matches found"},this.fallback=e.fallback||this.initial,this.clearFirst=e.clearFirst||!1,this.suggestions=[],this.input="",this.limit=e.limit||10,this.cursor=0,this.transform=Tt.render(e.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=jr("",this.out.columns),this.complete(this.render),this.render()}set fallback(e){this._fb=Number.isSafeInteger(parseInt(e))?parseInt(e):e}get fallback(){let e;return typeof this._fb=="number"?e=this.choices[this._fb]:typeof this._fb=="string"&&(e={title:this._fb}),e||this._fb||{title:this.i18n.noMatches}}moveSelect(e){this.select=e,this.suggestions.length>0?this.value=Gr(this.suggestions,e):this.value=this.fallback.value,this.fire()}async complete(e){const r=this.completing=this.suggest(this.input,this.choices),i=await r;if(this.completing!==r)return;this.suggestions=i.map((n,o,u)=>({title:qo(u,o),value:Gr(u,o),description:n.description})),this.completing=!1;const s=Math.max(i.length-1,0);this.moveSelect(Math.min(s,this.select)),e&&e()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(e,r){let i=this.input.slice(0,this.cursor),s=this.input.slice(this.cursor);this.input=`${i}${e}${s}`,this.cursor=i.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let e=this.input.slice(0,this.cursor-1),r=this.input.slice(this.cursor);this.input=`${e}${r}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let e=this.input.slice(0,this.cursor),r=this.input.slice(this.cursor+1);this.input=`${e}${r}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(e,r,i,s){let n,o=i?Dt.arrowUp:s?Dt.arrowDown:" ",u=r?Fe.cyan().underline(e.title):e.title;return o=(r?Fe.cyan(Dt.pointer)+" ":"  ")+o,e.description&&(n=` - ${e.description}`,(o.length+u.length+n.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(n=`
`+jo(e.description,{margin:3,width:this.out.columns}))),o+" "+u+Fe.gray(n||"")}render(){if(this.closed)return;this.firstRender?this.out.write(Hr.hide):this.out.write(jr(this.outputText,this.out.columns)),super.render();let{startIndex:e,endIndex:r}=Go(this.select,this.choices.length,this.limit);if(this.outputText=[Tt.symbol(this.done,this.aborted,this.exited),Fe.bold(this.msg),Tt.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const i=this.suggestions.slice(e,r).map((s,n)=>this.renderOption(s,this.select===n+e,n===0&&e>0,n+e===r-1&&r<this.choices.length)).join(`
`);this.outputText+=`
`+(i||Fe.gray(this.fallback.title))}this.out.write(Ho.line+Hr.to(0)+this.outputText)}}var zo=Zo;const ie=z,{cursor:Vo}=V,Ko=Ur,{clear:qr,style:Wr,figures:Ce}=Y;class Yo extends Ko{constructor(e={}){e.overrideRender=!0,super(e),this.inputValue="",this.clear=qr("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const e=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(i=>this.inputValue?!!(typeof i.title=="string"&&i.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof i.value=="string"&&i.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const r=this.filteredOptions.findIndex(i=>i===e);this.cursor=r<0?0:r,this.render()}handleSpaceToggle(){const e=this.filteredOptions[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter(r=>r.selected).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}handleInputChange(e){this.inputValue=this.inputValue+e,this.updateFilteredOptions()}_(e,r){e===" "?this.handleSpaceToggle():this.handleInputChange(e)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${Ce.arrowUp}/${Ce.arrowDown}: Highlight option
    ${Ce.arrowLeft}/${Ce.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:ie.gray("Enter something to filter")}
`}renderOption(e,r,i){let s;return r.disabled?s=e===i?ie.gray().underline(r.title):ie.strikethrough().gray(r.title):s=e===i?ie.cyan().underline(r.title):r.title,(r.selected?ie.green(Ce.radioOn):Ce.radioOff)+"  "+s}renderDoneOrInstructions(){if(this.done)return this.value.filter(r=>r.selected).map(r=>r.title).join(", ");const e=[ie.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&e.push(ie.yellow(this.warn)),e.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(Vo.hide),super.render();let e=[Wr.symbol(this.done,this.aborted),ie.bold(this.msg),Wr.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(e+=ie.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),e+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+e),this.clear=qr(e,this.out.columns)}}var Xo=Yo;const Zr=z,Jo=ae,{style:zr,clear:Qo}=Y,{erase:ea,cursor:Vr}=V;class ta extends Jo{constructor(e={}){super(e),this.msg=e.message,this.value=e.initial,this.initialValue=!!e.initial,this.yesMsg=e.yes||"yes",this.yesOption=e.yesOption||"(Y/n)",this.noMsg=e.no||"no",this.noOption=e.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(e,r){return e.toLowerCase()==="y"?(this.value=!0,this.submit()):e.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(Vr.hide):this.out.write(Qo(this.outputText,this.out.columns)),super.render(),this.outputText=[zr.symbol(this.done,this.aborted),Zr.bold(this.msg),zr.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:Zr.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(ea.line+Vr.to(0)+this.outputText))}}var ra=ta,ia={TextPrompt:On,SelectPrompt:Rn,TogglePrompt:Bn,DatePrompt:Oo,NumberPrompt:Fo,MultiselectPrompt:Ur,AutocompletePrompt:zo,AutocompleteMultiselectPrompt:Xo,ConfirmPrompt:ra};(function(t){const e=t,r=ia,i=o=>o;function s(o,u,m={}){return new Promise((c,E)=>{const y=new r[o](u),w=m.onAbort||i,a=m.onSubmit||i,h=m.onExit||i;y.on("state",u.onState||i),y.on("submit",f=>c(a(f))),y.on("exit",f=>c(h(f))),y.on("abort",f=>E(w(f)))})}e.text=o=>s("TextPrompt",o),e.password=o=>(o.style="password",e.text(o)),e.invisible=o=>(o.style="invisible",e.text(o)),e.number=o=>s("NumberPrompt",o),e.date=o=>s("DatePrompt",o),e.confirm=o=>s("ConfirmPrompt",o),e.list=o=>{const u=o.separator||",";return s("TextPrompt",o,{onSubmit:m=>m.split(u).map(c=>c.trim())})},e.toggle=o=>s("TogglePrompt",o),e.select=o=>s("SelectPrompt",o),e.multiselect=o=>{o.choices=[].concat(o.choices||[]);const u=m=>m.filter(c=>c.selected).map(c=>c.value);return s("MultiselectPrompt",o,{onAbort:u,onSubmit:u})},e.autocompleteMultiselect=o=>{o.choices=[].concat(o.choices||[]);const u=m=>m.filter(c=>c.selected).map(c=>c.value);return s("AutocompleteMultiselectPrompt",o,{onAbort:u,onSubmit:u})};const n=(o,u)=>Promise.resolve(u.filter(m=>m.title.slice(0,o.length).toLowerCase()===o.toLowerCase()));e.autocomplete=o=>(o.suggest=o.suggest||n,o.choices=[].concat(o.choices||[]),s("AutocompletePrompt",o))})(Sr);const Lt=Sr,sa=["suggest","format","onState","validate","onRender","type"],Kr=()=>{};async function le(t=[],{onSubmit:e=Kr,onCancel:r=Kr}={}){const i={},s=le._override||{};t=[].concat(t);let n,o,u,m,c,E;const y=async(w,a,h=!1)=>{if(!(!h&&w.validate&&w.validate(a)!==!0))return w.format?await w.format(a,i):a};for(o of t)if({name:m,type:c}=o,typeof c=="function"&&(c=await c(n,{...i},o),o.type=c),!!c){for(let w in o){if(sa.includes(w))continue;let a=o[w];o[w]=typeof a=="function"?await a(n,{...i},E):a}if(E=o,typeof o.message!="string")throw new Error("prompt message is required");if({name:m,type:c}=o,Lt[c]===void 0)throw new Error(`prompt type (${c}) is not defined`);if(s[o.name]!==void 0&&(n=await y(o,s[o.name]),n!==void 0)){i[m]=n;continue}try{n=le._injected?na(le._injected,o.initial):await Lt[c](o),i[m]=n=await y(o,n,!0),u=await e(o,n,i)}catch{u=!await r(o,i)}if(u)return i}return i}function na(t,e){const r=t.shift();if(r instanceof Error)throw r;return r===void 0?e:r}function oa(t){le._injected=(le._injected||[]).concat(t)}function aa(t){le._override=Object.assign({},t)}var ca=Object.assign(le,{prompt:le,prompts:Lt,inject:oa,override:aa});const Nt=Se(ca);var W={},Rt={exports:{}},Ke={exports:{}},Ye={exports:{}},Ft,Yr;function la(){if(Yr)return Ft;Yr=1;var t=1e3,e=t*60,r=e*60,i=r*24,s=i*365.25;Ft=function(c,E){E=E||{};var y=typeof c;if(y==="string"&&c.length>0)return n(c);if(y==="number"&&isNaN(c)===!1)return E.long?u(c):o(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function n(c){if(c=String(c),!(c.length>100)){var E=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(c);if(E){var y=parseFloat(E[1]),w=(E[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return y*s;case"days":case"day":case"d":return y*i;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*e;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function o(c){return c>=i?Math.round(c/i)+"d":c>=r?Math.round(c/r)+"h":c>=e?Math.round(c/e)+"m":c>=t?Math.round(c/t)+"s":c+"ms"}function u(c){return m(c,i,"day")||m(c,r,"hour")||m(c,e,"minute")||m(c,t,"second")||c+" ms"}function m(c,E,y){if(!(c<E))return c<E*1.5?Math.floor(c/E)+" "+y:Math.ceil(c/E)+" "+y+"s"}return Ft}var Xr;function Jr(){return Xr||(Xr=1,function(t,e){e=t.exports=s.debug=s.default=s,e.coerce=m,e.disable=o,e.enable=n,e.enabled=u,e.humanize=la(),e.names=[],e.skips=[],e.formatters={};var r;function i(c){var E=0,y;for(y in c)E=(E<<5)-E+c.charCodeAt(y),E|=0;return e.colors[Math.abs(E)%e.colors.length]}function s(c){function E(){if(E.enabled){var y=E,w=+new Date,a=w-(r||w);y.diff=a,y.prev=r,y.curr=w,r=w;for(var h=new Array(arguments.length),f=0;f<h.length;f++)h[f]=arguments[f];h[0]=e.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");var p=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(l,d){if(l==="%%")return l;p++;var g=e.formatters[d];if(typeof g=="function"){var b=h[p];l=g.call(y,b),h.splice(p,1),p--}return l}),e.formatArgs.call(y,h);var v=E.log||e.log||console.log.bind(console);v.apply(y,h)}}return E.namespace=c,E.enabled=e.enabled(c),E.useColors=e.useColors(),E.color=i(c),typeof e.init=="function"&&e.init(E),E}function n(c){e.save(c),e.names=[],e.skips=[];for(var E=(typeof c=="string"?c:"").split(/[\s,]+/),y=E.length,w=0;w<y;w++)E[w]&&(c=E[w].replace(/\*/g,".*?"),c[0]==="-"?e.skips.push(new RegExp("^"+c.substr(1)+"$")):e.names.push(new RegExp("^"+c+"$")))}function o(){e.enable("")}function u(c){var E,y;for(E=0,y=e.skips.length;E<y;E++)if(e.skips[E].test(c))return!1;for(E=0,y=e.names.length;E<y;E++)if(e.names[E].test(c))return!0;return!1}function m(c){return c instanceof Error?c.stack||c.message:c}}(Ye,Ye.exports)),Ye.exports}var Qr;function ha(){return Qr||(Qr=1,function(t,e){e=t.exports=Jr(),e.log=s,e.formatArgs=i,e.save=n,e.load=o,e.useColors=r,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:u(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(m){try{return JSON.stringify(m)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}};function i(m){var c=this.useColors;if(m[0]=(c?"%c":"")+this.namespace+(c?" %c":" ")+m[0]+(c?"%c ":" ")+"+"+e.humanize(this.diff),!!c){var E="color: "+this.color;m.splice(1,0,E,"color: inherit");var y=0,w=0;m[0].replace(/%[a-zA-Z%]/g,function(a){a!=="%%"&&(y++,a==="%c"&&(w=y))}),m.splice(w,0,E)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function n(m){try{m==null?e.storage.removeItem("debug"):e.storage.debug=m}catch{}}function o(){var m;try{m=e.storage.debug}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=process.env.DEBUG),m}e.enable(o());function u(){try{return window.localStorage}catch{}}}(Ke,Ke.exports)),Ke.exports}var Xe={exports:{}},ei;function ua(){return ei||(ei=1,function(t,e){var r=gr,i=ne;e=t.exports=Jr(),e.init=w,e.log=m,e.formatArgs=u,e.save=c,e.load=E,e.useColors=o,e.colors=[6,2,3,4,5,1],e.inspectOpts=Object.keys(process.env).filter(function(a){return/^debug_/i.test(a)}).reduce(function(a,h){var f=h.substring(6).toLowerCase().replace(/_([a-z])/g,function(v,l){return l.toUpperCase()}),p=process.env[h];return/^(yes|on|true|enabled)$/i.test(p)?p=!0:/^(no|off|false|disabled)$/i.test(p)?p=!1:p==="null"?p=null:p=Number(p),a[f]=p,a},{});var s=parseInt(process.env.DEBUG_FD,10)||2;s!==1&&s!==2&&i.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var n=s===1?process.stdout:s===2?process.stderr:y(s);function o(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(s)}e.formatters.o=function(a){return this.inspectOpts.colors=this.useColors,i.inspect(a,this.inspectOpts).split(`
`).map(function(h){return h.trim()}).join(" ")},e.formatters.O=function(a){return this.inspectOpts.colors=this.useColors,i.inspect(a,this.inspectOpts)};function u(a){var h=this.namespace,f=this.useColors;if(f){var p=this.color,v="  \x1B[3"+p+";1m"+h+" \x1B[0m";a[0]=v+a[0].split(`
`).join(`
`+v),a.push("\x1B[3"+p+"m+"+e.humanize(this.diff)+"\x1B[0m")}else a[0]=new Date().toUTCString()+" "+h+" "+a[0]}function m(){return n.write(i.format.apply(i,arguments)+`
`)}function c(a){a==null?delete process.env.DEBUG:process.env.DEBUG=a}function E(){return process.env.DEBUG}function y(a){var h,f=process.binding("tty_wrap");switch(f.guessHandleType(a)){case"TTY":h=new r.WriteStream(a),h._type="tty",h._handle&&h._handle.unref&&h._handle.unref();break;case"FILE":var p=we;h=new p.SyncWriteStream(a,{autoClose:!1}),h._type="fs";break;case"PIPE":case"TCP":var v=$s;h=new v.Socket({fd:a,readable:!1,writable:!0}),h.readable=!1,h.read=null,h._type="pipe",h._handle&&h._handle.unref&&h._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return h.fd=a,h._isStdio=!0,h}function w(a){a.inspectOpts={};for(var h=Object.keys(e.inspectOpts),f=0;f<h.length;f++)a.inspectOpts[h[f]]=e.inspectOpts[h[f]]}e.enable(E())}(Xe,Xe.exports)),Xe.exports}typeof process<"u"&&process.type==="renderer"?Rt.exports=ha():Rt.exports=ua();var ti=Rt.exports,fa=W.noop=function(){};W.extend=function(e,r){for(var i in r)e[i]=r[i]},W.eventEmitterListenerCount=Q.EventEmitter.listenerCount||function(t,e){return t.listeners(e).length},W.bufferAllocUnsafe=Buffer.allocUnsafe?Buffer.allocUnsafe:function(e){return new Buffer(e)},W.bufferFromString=Buffer.from?Buffer.from:function(e,r){return new Buffer(e,r)},W.BufferingLogger=function(e,r){var i=ti(e);if(i.enabled){var s=new Je(e,r,i),n=s.log.bind(s);return n.printOutput=s.printOutput.bind(s),n.enabled=i.enabled,n}return i.printOutput=fa,i};function Je(t,e,r){this.logFunction=r,this.identifier=t,this.uniqueID=e,this.buffer=[]}Je.prototype.log=function(){return this.buffer.push([new Date,Array.prototype.slice.call(arguments)]),this},Je.prototype.clear=function(){return this.buffer=[],this},Je.prototype.printOutput=function(t){t||(t=this.logFunction);var e=this.uniqueID;this.buffer.forEach(function(r){var i=r[0].toLocaleString(),s=r[1].slice(),n=s[0];n!=null&&(n="%s - %s - "+n.toString(),s.splice(0,1,n,i,e),t.apply(De,s))})};var $t={exports:{}},Qe={exports:{}},kt,ri;function da(){if(ri)return kt;ri=1;var t=we,e=de,r=ks,i=typeof __webpack_require__=="function"?__non_webpack_require__:Et,s=process.config&&process.config.variables||{},n=!!process.env.PREBUILDS_ONLY,o=process.versions.modules,u=O()?"electron":L()?"node-webkit":"node",m=process.env.npm_config_arch||r.arch(),c=process.env.npm_config_platform||r.platform(),E=process.env.LIBC||(A(c)?"musl":"glibc"),y=process.env.ARM_VERSION||(m==="arm64"?"8":s.arm_version)||"",w=(process.versions.uv||"").split(".")[0];kt=a;function a(I){return i(a.resolve(I))}a.resolve=a.path=function(I){I=e.resolve(I||".");try{var D=i(e.join(I,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[D+"_PREBUILD"]&&(I=process.env[D+"_PREBUILD"])}catch{}if(!n){var T=f(e.join(I,"build/Release"),p);if(T)return T;var H=f(e.join(I,"build/Debug"),p);if(H)return H}var K=fr(I);if(K)return K;var G=fr(e.dirname(process.execPath));if(G)return G;var Ts=["platform="+c,"arch="+m,"runtime="+u,"abi="+o,"uv="+w,y?"armv="+y:"","libc="+E,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+Ts+`
    loaded from: `+I+`
`);function fr(gt){var Ds=h(e.join(gt,"prebuilds")).map(v),dr=Ds.filter(l(c,m)).sort(d)[0];if(dr){var pr=e.join(gt,"prebuilds",dr.name),Ls=h(pr).map(g),Ns=Ls.filter(b(u,o)),mr=Ns.sort(S(u))[0];if(mr)return e.join(pr,mr.file)}}};function h(I){try{return t.readdirSync(I)}catch{return[]}}function f(I,D){var T=h(I).filter(D);return T[0]&&e.join(I,T[0])}function p(I){return/\.node$/.test(I)}function v(I){var D=I.split("-");if(D.length===2){var T=D[0],H=D[1].split("+");if(T&&H.length&&H.every(Boolean))return{name:I,platform:T,architectures:H}}}function l(I,D){return function(T){return T==null||T.platform!==I?!1:T.architectures.includes(D)}}function d(I,D){return I.architectures.length-D.architectures.length}function g(I){var D=I.split("."),T=D.pop(),H={file:I,specificity:0};if(T==="node"){for(var K=0;K<D.length;K++){var G=D[K];if(G==="node"||G==="electron"||G==="node-webkit")H.runtime=G;else if(G==="napi")H.napi=!0;else if(G.slice(0,3)==="abi")H.abi=G.slice(3);else if(G.slice(0,2)==="uv")H.uv=G.slice(2);else if(G.slice(0,4)==="armv")H.armv=G.slice(4);else if(G==="glibc"||G==="musl")H.libc=G;else continue;H.specificity++}return H}}function b(I,D){return function(T){return!(T==null||T.runtime&&T.runtime!==I&&!_(T)||T.abi&&T.abi!==D&&!T.napi||T.uv&&T.uv!==w||T.armv&&T.armv!==y||T.libc&&T.libc!==E)}}function _(I){return I.runtime==="node"&&I.napi}function S(I){return function(D,T){return D.runtime!==T.runtime?D.runtime===I?-1:1:D.abi!==T.abi?D.abi?-1:1:D.specificity!==T.specificity?D.specificity>T.specificity?-1:1:0}}function L(){return!!(process.versions&&process.versions.nw)}function O(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function A(I){return I==="linux"&&t.existsSync("/etc/alpine-release")}return a.parseTags=g,a.matchTags=b,a.compareTags=S,a.parseTuple=v,a.matchTuple=l,a.compareTuples=d,kt}var ii;function si(){if(ii)return Qe.exports;ii=1;const t=typeof __webpack_require__=="function"?__non_webpack_require__:Et;return typeof t.addon=="function"?Qe.exports=t.addon.bind(t):Qe.exports=da(),Qe.exports}var Pt,ni;function pa(){return ni||(ni=1,Pt={mask:(r,i,s,n,o)=>{for(var u=0;u<o;u++)s[n+u]=r[u]^i[u&3]},unmask:(r,i)=>{const s=r.length;for(var n=0;n<s;n++)r[n]^=i[n&3]}}),Pt}try{$t.exports=si()(__dirname)}catch{$t.exports=pa()}var ma=$t.exports,oi=ma,et=W.bufferAllocUnsafe;const ai=1,ci=2,li=3,tt=4,Bt=5,Mt=6;function $e(t,e,r){this.maskBytes=t,this.frameHeader=e,this.config=r,this.maxReceivedFrameSize=r.maxReceivedFrameSize,this.protocolError=!1,this.frameTooLarge=!1,this.invalidCloseFrameLength=!1,this.parseState=ai,this.closeStatus=-1}$e.prototype.addData=function(t){if(this.parseState===ai&&t.length>=2){t.joinInto(this.frameHeader,0,0,2),t.advance(2);var e=this.frameHeader[0],r=this.frameHeader[1];if(this.fin=!!(e&128),this.rsv1=!!(e&64),this.rsv2=!!(e&32),this.rsv3=!!(e&16),this.mask=!!(r&128),this.opcode=e&15,this.length=r&127,this.opcode>=8){if(this.length>125)return this.protocolError=!0,this.dropReason="Illegal control frame longer than 125 bytes.",!0;if(!this.fin)return this.protocolError=!0,this.dropReason="Control frames must not be fragmented.",!0}this.length===126?this.parseState=ci:this.length===127?this.parseState=li:this.parseState=tt}if(this.parseState===ci)t.length>=2&&(t.joinInto(this.frameHeader,2,0,2),t.advance(2),this.length=this.frameHeader.readUInt16BE(2),this.parseState=tt);else if(this.parseState===li&&t.length>=8){t.joinInto(this.frameHeader,2,0,8),t.advance(8);var i=[this.frameHeader.readUInt32BE(2),this.frameHeader.readUInt32BE(6)];if(i[0]!==0)return this.protocolError=!0,this.dropReason="Unsupported 64-bit length frame received",!0;this.length=i[1],this.parseState=tt}if(this.parseState===tt&&(this.mask?t.length>=4&&(t.joinInto(this.maskBytes,0,0,4),t.advance(4),this.parseState=Bt):this.parseState=Bt),this.parseState===Bt){if(this.length>this.maxReceivedFrameSize)return this.frameTooLarge=!0,this.dropReason="Frame size of "+this.length.toString(10)+" bytes exceeds maximum accepted frame size",!0;if(this.length===0)return this.binaryPayload=et(0),this.parseState=Mt,!0;if(t.length>=this.length)return this.binaryPayload=t.take(this.length),t.advance(this.length),this.mask&&oi.unmask(this.binaryPayload,this.maskBytes),this.opcode===8&&(this.length===1&&(this.binaryPayload=et(0),this.invalidCloseFrameLength=!0),this.length>=2&&(this.closeStatus=this.binaryPayload.readUInt16BE(0),this.binaryPayload=this.binaryPayload.slice(2))),this.parseState=Mt,!0}return!1},$e.prototype.throwAwayPayload=function(t){return t.length>=this.length?(t.advance(this.length),this.parseState=Mt,!0):!1},$e.prototype.toBuffer=function(t){var e,r=2,i,s,n=0,o=0;this.fin&&(n|=128),this.rsv1&&(n|=64),this.rsv2&&(n|=32),this.rsv3&&(n|=16),this.mask&&(o|=128),n|=this.opcode&15,this.opcode===8?(this.length=2,this.binaryPayload&&(this.length+=this.binaryPayload.length),i=et(this.length),i.writeUInt16BE(this.closeStatus,0),this.length>2&&this.binaryPayload.copy(i,2)):this.binaryPayload?(i=this.binaryPayload,this.length=i.length):this.length=0,this.length<=125?o|=this.length&127:this.length>125&&this.length<=65535?(o|=126,r+=2):this.length>65535&&(o|=127,r+=8);var u=et(this.length+r+(this.mask?4:0));return u[0]=n,u[1]=o,s=2,this.length>125&&this.length<=65535?(u.writeUInt16BE(this.length,s),s+=2):this.length>65535&&(u.writeUInt32BE(0,s),u.writeUInt32BE(this.length,s+4),s+=8),this.mask?(e=t?0:Math.random()*4294967295>>>0,this.maskBytes.writeUInt32BE(e,0),this.maskBytes.copy(u,s),s+=4,i&&oi.mask(i,this.maskBytes,u,s,this.length)):i&&i.copy(u,s),u},$e.prototype.toString=function(){return"Opcode: "+this.opcode+", fin: "+this.fin+", length: "+this.length+", hasPayload: "+!!this.binaryPayload+", masked: "+this.mask};var hi=$e,Ut={exports:{}},ga=Ps.Buffer,ui=Q.EventEmitter,rt=W.bufferAllocUnsafe;Ut.exports=ke,Ut.exports.BufferList=ke;function ke(t){if(!(this instanceof ke))return new ke(t);ui.call(this);var e=this;typeof t>"u"&&(t={}),e.encoding=t.encoding;var r={next:null,buffer:null},i={next:null,buffer:null},s=0;e.__defineGetter__("length",function(){return s});var n=0;e.write=function(o){return r.buffer?(i.next={next:null,buffer:o},i=i.next):(r.buffer=o,i=r),s+=o.length,e.emit("write",o),!0},e.end=function(o){ga.isBuffer(o)&&e.write(o)},e.push=function(){var o=[].concat.apply([],arguments);return o.forEach(e.write),e},e.forEach=function(o){if(!r.buffer)return rt(0);if(r.buffer.length-n<=0)return e;for(var u=r.buffer.slice(n),m={buffer:u,next:r.next};m&&m.buffer;){var c=o(m.buffer);if(c)break;m=m.next}return e},e.join=function(o,u){if(!r.buffer)return rt(0);o==null&&(o=0),u==null&&(u=e.length);var m=rt(u-o),c=0;return e.forEach(function(E){if(o<c+E.length&&c<u&&E.copy(m,Math.max(0,c-o),Math.max(0,o-c),Math.min(E.length,u-c)),c+=E.length,c>u)return!0}),m},e.joinInto=function(o,u,m,c){if(!r.buffer)return new rt(0);m==null&&(m=0),c==null&&(c=e.length);var E=o;if(E.length-u<c-m)throw new Error("Insufficient space available in target Buffer.");var y=0;return e.forEach(function(w){if(m<y+w.length&&y<c&&w.copy(E,Math.max(u,u+y-m),Math.max(0,m-y),Math.min(w.length,c-y)),y+=w.length,y>c)return!0}),E},e.advance=function(o){for(n+=o,s-=o;r.buffer&&n>=r.buffer.length;)n-=r.buffer.length,r=r.next?r.next:{buffer:null,next:null};return r.buffer===null&&(i={next:null,buffer:null}),e.emit("advance",o),e},e.take=function(o,u){if(o==null?o=e.length:typeof o!="number"&&(u=o,o=e.length),u||(u=e.encoding),u){var m="";return e.forEach(function(c){if(o<=0)return!0;m+=c.toString(u,0,Math.min(o,c.length)),o-=c.length}),m}else return e.join(0,o)},e.toString=function(){return e.take("binary")}}ne.inherits(ke,ui);var va=Ut.exports,Ht={exports:{}},jt,fi;function Ea(){if(fi)return jt;fi=1;function t(e){const r=e.length;let i=0;for(;i<r;)if(!(e[i]&128))i++;else if((e[i]&224)===192){if(i+1===r||(e[i+1]&192)!==128||(e[i]&254)===192)return!1;i+=2}else if((e[i]&240)===224){if(i+2>=r||(e[i+1]&192)!==128||(e[i+2]&192)!==128||e[i]===224&&(e[i+1]&224)===128||e[i]===237&&(e[i+1]&224)===160)return!1;i+=3}else if((e[i]&248)===240){if(i+3>=r||(e[i+1]&192)!==128||(e[i+2]&192)!==128||(e[i+3]&192)!==128||e[i]===240&&(e[i+1]&240)===128||e[i]===244&&e[i+1]>143||e[i]>244)return!1;i+=4}else return!1;return!0}return jt=t,jt}try{Ht.exports=si()(__dirname)}catch{Ht.exports=Ea()}var ya=Ht.exports,ba=ne,it=W,di=Q.EventEmitter,he=hi,wa=va,Gt=ya,qt=it.bufferAllocUnsafe,Wt=it.bufferFromString;const pi="open",Zt="peer_requested_close",mi="ending",ge="closed";var Sa="setImmediate"in De?De.setImmediate.bind(De):process.nextTick.bind(process),_a=0;function x(t,e,r,i,s){if(this._debug=it.BufferingLogger("websocket:connection",++_a),this._debug("constructor"),this._debug.enabled&&Ca(this,t),di.call(this),this._pingListenerCount=0,this.on("newListener",function(n){n==="ping"&&this._pingListenerCount++}).on("removeListener",function(n){n==="ping"&&this._pingListenerCount--}),this.config=s,this.socket=t,this.protocol=r,this.extensions=e,this.remoteAddress=t.remoteAddress,this.closeReasonCode=-1,this.closeDescription=null,this.closeEventEmitted=!1,this.maskOutgoingPackets=i,this.maskBytes=qt(4),this.frameHeader=qt(10),this.bufferList=new wa,this.currentFrame=new he(this.maskBytes,this.frameHeader,this.config),this.fragmentationSize=0,this.frameQueue=[],this.connected=!0,this.state=pi,this.waitingForCloseResponse=!1,this.receivedEnd=!1,this.closeTimeout=this.config.closeTimeout,this.assembleFragments=this.config.assembleFragments,this.maxReceivedMessageSize=this.config.maxReceivedMessageSize,this.outputBufferFull=!1,this.inputPaused=!1,this.receivedDataHandler=this.processReceivedData.bind(this),this._closeTimerHandler=this.handleCloseTimer.bind(this),this.socket.setNoDelay(this.config.disableNagleAlgorithm),this.socket.setTimeout(0),this.config.keepalive&&!this.config.useNativeKeepalive){if(typeof this.config.keepaliveInterval!="number")throw new Error("keepaliveInterval must be specified and numeric if keepalive is true.");if(this._keepaliveTimerHandler=this.handleKeepaliveTimer.bind(this),this.setKeepaliveTimer(),this.config.dropConnectionOnKeepaliveTimeout){if(typeof this.config.keepaliveGracePeriod!="number")throw new Error("keepaliveGracePeriod  must be specified and numeric if dropConnectionOnKeepaliveTimeout is true.");this._gracePeriodTimerHandler=this.handleGracePeriodTimer.bind(this)}}else if(this.config.keepalive&&this.config.useNativeKeepalive){if(!("setKeepAlive"in this.socket))throw new Error("Unable to use native keepalive: unsupported by this version of Node.");this.socket.setKeepAlive(!0,this.config.keepaliveInterval)}this.socket.removeAllListeners("error")}x.CLOSE_REASON_NORMAL=1e3,x.CLOSE_REASON_GOING_AWAY=1001,x.CLOSE_REASON_PROTOCOL_ERROR=1002,x.CLOSE_REASON_UNPROCESSABLE_INPUT=1003,x.CLOSE_REASON_RESERVED=1004,x.CLOSE_REASON_NOT_PROVIDED=1005,x.CLOSE_REASON_ABNORMAL=1006,x.CLOSE_REASON_INVALID_DATA=1007,x.CLOSE_REASON_POLICY_VIOLATION=1008,x.CLOSE_REASON_MESSAGE_TOO_BIG=1009,x.CLOSE_REASON_EXTENSION_REQUIRED=1010,x.CLOSE_REASON_INTERNAL_SERVER_ERROR=1011,x.CLOSE_REASON_TLS_HANDSHAKE_FAILED=1015,x.CLOSE_DESCRIPTIONS={1e3:"Normal connection closure",1001:"Remote peer is going away",1002:"Protocol error",1003:"Unprocessable input",1004:"Reserved",1005:"Reason not provided",1006:"Abnormal closure, no further detail available",1007:"Invalid data received",1008:"Policy violation",1009:"Message too big",1010:"Extension requested by client is required",1011:"Internal Server Error",1015:"TLS Handshake Failed"};function gi(t){if(t<1e3)return!1;if(t>=1e3&&t<=2999)return[1e3,1001,1002,1003,1007,1008,1009,1010,1011,1012,1013,1014,1015].indexOf(t)!==-1;if(t>=3e3&&t<=3999||t>=4e3&&t<=4999)return!0;if(t>=5e3)return!1}ba.inherits(x,di),x.prototype._addSocketEventListeners=function(){this.socket.on("error",this.handleSocketError.bind(this)),this.socket.on("end",this.handleSocketEnd.bind(this)),this.socket.on("close",this.handleSocketClose.bind(this)),this.socket.on("drain",this.handleSocketDrain.bind(this)),this.socket.on("pause",this.handleSocketPause.bind(this)),this.socket.on("resume",this.handleSocketResume.bind(this)),this.socket.on("data",this.handleSocketData.bind(this))},x.prototype.setKeepaliveTimer=function(){this._debug("setKeepaliveTimer"),!(!this.config.keepalive||this.config.useNativeKeepalive)&&(this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this._keepaliveTimeoutID=setTimeout(this._keepaliveTimerHandler,this.config.keepaliveInterval))},x.prototype.clearKeepaliveTimer=function(){this._keepaliveTimeoutID&&clearTimeout(this._keepaliveTimeoutID)},x.prototype.handleKeepaliveTimer=function(){this._debug("handleKeepaliveTimer"),this._keepaliveTimeoutID=null,this.ping(),this.config.dropConnectionOnKeepaliveTimeout?this.setGracePeriodTimer():this.setKeepaliveTimer()},x.prototype.setGracePeriodTimer=function(){this._debug("setGracePeriodTimer"),this.clearGracePeriodTimer(),this._gracePeriodTimeoutID=setTimeout(this._gracePeriodTimerHandler,this.config.keepaliveGracePeriod)},x.prototype.clearGracePeriodTimer=function(){this._gracePeriodTimeoutID&&clearTimeout(this._gracePeriodTimeoutID)},x.prototype.handleGracePeriodTimer=function(){this._debug("handleGracePeriodTimer"),this._gracePeriodTimeoutID=null,this.drop(x.CLOSE_REASON_ABNORMAL,"Peer not responding.",!0)},x.prototype.handleSocketData=function(t){this._debug("handleSocketData"),this.setKeepaliveTimer(),this.bufferList.write(t),this.processReceivedData()},x.prototype.processReceivedData=function(){if(this._debug("processReceivedData"),!!this.connected&&!this.inputPaused){var t=this.currentFrame;if(!t.addData(this.bufferList)){this._debug("-- insufficient data for frame");return}var e=this;if(t.protocolError){this._debug("-- protocol error"),process.nextTick(function(){e.drop(x.CLOSE_REASON_PROTOCOL_ERROR,t.dropReason)});return}else if(t.frameTooLarge){this._debug("-- frame too large"),process.nextTick(function(){e.drop(x.CLOSE_REASON_MESSAGE_TOO_BIG,t.dropReason)});return}if(t.rsv1||t.rsv2||t.rsv3){this._debug("-- illegal rsv flag"),process.nextTick(function(){e.drop(x.CLOSE_REASON_PROTOCOL_ERROR,"Unsupported usage of rsv bits without negotiated extension.")});return}this.assembleFragments||(this._debug("-- emitting frame"),process.nextTick(function(){e.emit("frame",t)})),process.nextTick(function(){e.processFrame(t)}),this.currentFrame=new he(this.maskBytes,this.frameHeader,this.config),this.bufferList.length>0&&Sa(this.receivedDataHandler)}},x.prototype.handleSocketError=function(t){if(this._debug("handleSocketError: %j",t),this.state===ge){this._debug("  --- Socket 'error' after 'close'");return}this.closeReasonCode=x.CLOSE_REASON_ABNORMAL,this.closeDescription="Socket Error: "+t.syscall+" "+t.code,this.connected=!1,this.state=ge,this.fragmentationSize=0,it.eventEmitterListenerCount(this,"error")>0&&this.emit("error",t),this.socket.destroy(),this._debug.printOutput()},x.prototype.handleSocketEnd=function(){if(this._debug("handleSocketEnd: received socket end.  state = %s",this.state),this.receivedEnd=!0,this.state===ge){this._debug("  --- Socket 'end' after 'close'");return}this.state!==Zt&&this.state!==mi&&(this._debug("  --- UNEXPECTED socket end."),this.socket.end())},x.prototype.handleSocketClose=function(t){this._debug("handleSocketClose: received socket close"),this.socketHadError=t,this.connected=!1,this.state=ge,this.closeReasonCode===-1&&(this.closeReasonCode=x.CLOSE_REASON_ABNORMAL,this.closeDescription="Connection dropped by remote peer."),this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("-- Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription))},x.prototype.handleSocketDrain=function(){this._debug("handleSocketDrain: socket drain event"),this.outputBufferFull=!1,this.emit("drain")},x.prototype.handleSocketPause=function(){this._debug("handleSocketPause: socket pause event"),this.inputPaused=!0,this.emit("pause")},x.prototype.handleSocketResume=function(){this._debug("handleSocketResume: socket resume event"),this.inputPaused=!1,this.emit("resume"),this.processReceivedData()},x.prototype.pause=function(){this._debug("pause: pause requested"),this.socket.pause()},x.prototype.resume=function(){this._debug("resume: resume requested"),this.socket.resume()},x.prototype.close=function(t,e){if(this.connected){if(this._debug("close: Initating clean WebSocket close sequence."),typeof t!="number"&&(t=x.CLOSE_REASON_NORMAL),!gi(t))throw new Error("Close code "+t+" is not valid.");typeof e!="string"&&(e=x.CLOSE_DESCRIPTIONS[t]),this.closeReasonCode=t,this.closeDescription=e,this.setCloseTimer(),this.sendCloseFrame(this.closeReasonCode,this.closeDescription),this.state=mi,this.connected=!1}},x.prototype.drop=function(t,e,r){this._debug("drop"),typeof t!="number"&&(t=x.CLOSE_REASON_PROTOCOL_ERROR),typeof e!="string"&&(e=x.CLOSE_DESCRIPTIONS[t]),this._debug("Forcefully dropping connection. skipCloseFrame: %s, code: %d, description: %s",r,t,e),this.closeReasonCode=t,this.closeDescription=e,this.frameQueue=[],this.fragmentationSize=0,r||this.sendCloseFrame(t,e),this.connected=!1,this.state=ge,this.clearCloseTimer(),this.clearKeepaliveTimer(),this.clearGracePeriodTimer(),this.closeEventEmitted||(this.closeEventEmitted=!0,this._debug("Emitting WebSocketConnection close event"),this.emit("close",this.closeReasonCode,this.closeDescription)),this._debug("Drop: destroying socket"),this.socket.destroy()},x.prototype.setCloseTimer=function(){this._debug("setCloseTimer"),this.clearCloseTimer(),this._debug("Setting close timer"),this.waitingForCloseResponse=!0,this.closeTimer=setTimeout(this._closeTimerHandler,this.closeTimeout)},x.prototype.clearCloseTimer=function(){this._debug("clearCloseTimer"),this.closeTimer&&(this._debug("Clearing close timer"),clearTimeout(this.closeTimer),this.waitingForCloseResponse=!1,this.closeTimer=null)},x.prototype.handleCloseTimer=function(){this._debug("handleCloseTimer"),this.closeTimer=null,this.waitingForCloseResponse&&(this._debug("Close response not received from client.  Forcing socket end."),this.waitingForCloseResponse=!1,this.state=ge,this.socket.end())},x.prototype.processFrame=function(t){if(this._debug("processFrame"),this._debug(" -- frame: %s",t),this.frameQueue.length!==0&&t.opcode>0&&t.opcode<8){this.drop(x.CLOSE_REASON_PROTOCOL_ERROR,"Illegal frame opcode 0x"+t.opcode.toString(16)+" received in middle of fragmented message.");return}switch(t.opcode){case 2:this._debug("-- Binary Frame"),this.assembleFragments&&(t.fin?(this._debug("---- Emitting 'message' event"),this.emit("message",{type:"binary",binaryData:t.binaryPayload})):(this.frameQueue.push(t),this.fragmentationSize=t.length));break;case 1:if(this._debug("-- Text Frame"),this.assembleFragments)if(t.fin){if(!Gt(t.binaryPayload)){this.drop(x.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");return}this._debug("---- Emitting 'message' event"),this.emit("message",{type:"utf8",utf8Data:t.binaryPayload.toString("utf8")})}else this.frameQueue.push(t),this.fragmentationSize=t.length;break;case 0:if(this._debug("-- Continuation Frame"),this.assembleFragments){if(this.frameQueue.length===0){this.drop(x.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected Continuation Frame");return}if(this.fragmentationSize+=t.length,this.fragmentationSize>this.maxReceivedMessageSize){this.drop(x.CLOSE_REASON_MESSAGE_TOO_BIG,"Maximum message size exceeded.");return}if(this.frameQueue.push(t),t.fin){var e=0,r=qt(this.fragmentationSize),i=this.frameQueue[0].opcode;switch(this.frameQueue.forEach(function(u){u.binaryPayload.copy(r,e),e+=u.binaryPayload.length}),this.frameQueue=[],this.fragmentationSize=0,i){case 2:this.emit("message",{type:"binary",binaryData:r});break;case 1:if(!Gt(r)){this.drop(x.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");return}this.emit("message",{type:"utf8",utf8Data:r.toString("utf8")});break;default:this.drop(x.CLOSE_REASON_PROTOCOL_ERROR,"Unexpected first opcode in fragmentation sequence: 0x"+i.toString(16));return}}}break;case 9:if(this._debug("-- Ping Frame"),this._pingListenerCount>0){var s=!1,n=function(){s=!0};this.emit("ping",n,t.binaryPayload),s||this.pong(t.binaryPayload)}else this.pong(t.binaryPayload);break;case 10:this._debug("-- Pong Frame"),this.emit("pong",t.binaryPayload);break;case 8:if(this._debug("-- Close Frame"),this.waitingForCloseResponse){this._debug("---- Got close response from peer.  Completing closing handshake."),this.clearCloseTimer(),this.waitingForCloseResponse=!1,this.state=ge,this.socket.end();return}this._debug("---- Closing handshake initiated by peer."),this.state=Zt;var o;if(t.invalidCloseFrameLength?(this.closeReasonCode=1005,o=x.CLOSE_REASON_PROTOCOL_ERROR):t.closeStatus===-1||gi(t.closeStatus)?(this.closeReasonCode=t.closeStatus,o=x.CLOSE_REASON_NORMAL):(this.closeReasonCode=t.closeStatus,o=x.CLOSE_REASON_PROTOCOL_ERROR),t.binaryPayload.length>1){if(!Gt(t.binaryPayload)){this.drop(x.CLOSE_REASON_INVALID_DATA,"Invalid UTF-8 Data Received");return}this.closeDescription=t.binaryPayload.toString("utf8")}else this.closeDescription=x.CLOSE_DESCRIPTIONS[this.closeReasonCode];this._debug("------ Remote peer %s - code: %d - %s - close frame payload length: %d",this.remoteAddress,this.closeReasonCode,this.closeDescription,t.length),this._debug("------ responding to remote peer's close request."),this.sendCloseFrame(o,null),this.connected=!1;break;default:this._debug("-- Unrecognized Opcode %d",t.opcode),this.drop(x.CLOSE_REASON_PROTOCOL_ERROR,"Unrecognized Opcode: 0x"+t.opcode.toString(16));break}},x.prototype.send=function(t,e){if(this._debug("send"),Buffer.isBuffer(t))this.sendBytes(t,e);else if(typeof t.toString=="function")this.sendUTF(t,e);else throw new Error("Data provided must either be a Node Buffer or implement toString()")},x.prototype.sendUTF=function(t,e){t=Wt(t.toString(),"utf8"),this._debug("sendUTF: %d bytes",t.length);var r=new he(this.maskBytes,this.frameHeader,this.config);r.opcode=1,r.binaryPayload=t,this.fragmentAndSend(r,e)},x.prototype.sendBytes=function(t,e){if(this._debug("sendBytes"),!Buffer.isBuffer(t))throw new Error("You must pass a Node Buffer object to WebSocketConnection.prototype.sendBytes()");var r=new he(this.maskBytes,this.frameHeader,this.config);r.opcode=2,r.binaryPayload=t,this.fragmentAndSend(r,e)},x.prototype.ping=function(t){this._debug("ping");var e=new he(this.maskBytes,this.frameHeader,this.config);e.opcode=9,e.fin=!0,t&&(Buffer.isBuffer(t)||(t=Wt(t.toString(),"utf8")),t.length>125&&(this._debug("WebSocket: Data for ping is longer than 125 bytes.  Truncating."),t=t.slice(0,124)),e.binaryPayload=t),this.sendFrame(e)},x.prototype.pong=function(t){this._debug("pong");var e=new he(this.maskBytes,this.frameHeader,this.config);e.opcode=10,Buffer.isBuffer(t)&&t.length>125&&(this._debug("WebSocket: Data for pong is longer than 125 bytes.  Truncating."),t=t.slice(0,124)),e.binaryPayload=t,e.fin=!0,this.sendFrame(e)},x.prototype.fragmentAndSend=function(t,e){if(this._debug("fragmentAndSend"),t.opcode>7)throw new Error("You cannot fragment control frames.");var r=this.config.fragmentationThreshold,i=t.binaryPayload.length;if(!this.config.fragmentOutgoingMessages||t.binaryPayload&&i<=r){t.fin=!0,this.sendFrame(t,e);return}for(var s=Math.ceil(i/r),n=0,o=function(w){if(w){typeof e=="function"&&(e(w),e=null);return}++n,n===s&&typeof e=="function"&&e()},u=1;u<=s;u++){var m=new he(this.maskBytes,this.frameHeader,this.config);m.opcode=u===1?t.opcode:0,m.fin=u===s;var c=u===s?i-r*(u-1):r,E=r*(u-1);m.binaryPayload=t.binaryPayload.slice(E,E+c),this.sendFrame(m,o)}},x.prototype.sendCloseFrame=function(t,e,r){if(typeof t!="number"&&(t=x.CLOSE_REASON_NORMAL),this._debug("sendCloseFrame state: %s, reasonCode: %d, description: %s",this.state,t,e),!(this.state!==pi&&this.state!==Zt)){var i=new he(this.maskBytes,this.frameHeader,this.config);i.fin=!0,i.opcode=8,i.closeStatus=t,typeof e=="string"&&(i.binaryPayload=Wt(e,"utf8")),this.sendFrame(i,r),this.socket.end()}},x.prototype.sendFrame=function(t,e){this._debug("sendFrame"),t.mask=this.maskOutgoingPackets;var r=this.socket.write(t.toBuffer(),e);return this.outputBufferFull=!r,r};var zt=x;function Ca(t,e){if(t._debug.enabled){var r=e.emit;e.emit=function(s){t._debug("||| Socket Event  '%s'",s),r.apply(this,arguments)};for(var i in e)typeof e[i]=="function"&&["emit"].indexOf(i)===-1&&function(s){var n=e[s];if(s==="on"){e[s]=function(){return t._debug("||| Socket method called:  %s (%s)",s,arguments[0]),n.apply(this,arguments)};return}e[s]=function(){return t._debug("||| Socket method called:  %s",s),n.apply(this,arguments)}}(i)}}var xa=vt,Ia=ne,Oa=vr,vi=Q.EventEmitter,Aa=zt,Ei=/,\s*/,Ta=/;\s*/,Pe=/[\r\n]/g,Da=/,\s*/,La=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ","	"],Na=/([\x00-\x20\x22\x28\x29\x2c\x2f\x3a-\x3f\x40\x5b-\x5e\x7b\x7d\x7f])/,yi=/[^\x21\x23-\x2b\x2d-\x3a\x3c-\x5b\x5d-\x7e]/,Ra=/^"[^"]*"$/,st=/[\x00-\x20\x3b]/g,Fa=/[;,] */,$a={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",406:"Not Acceptable",407:"Proxy Authorization Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Long",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};function J(t,e,r){vi.call(this),this.socket=t,this.httpRequest=e,this.resource=e.url,this.remoteAddress=t.remoteAddress,this.remoteAddresses=[this.remoteAddress],this.serverConfig=r,this._socketIsClosing=!1,this._socketCloseHandler=this._handleSocketCloseBeforeAccept.bind(this),this.socket.on("end",this._socketCloseHandler),this.socket.on("close",this._socketCloseHandler),this._resolved=!1}Ia.inherits(J,vi),J.prototype.readHandshake=function(){var t=this,e=this.httpRequest;if(this.resourceURL=Oa.parse(this.resource,!0),this.host=e.headers.host,!this.host)throw new Error("Client must provide a Host header.");if(this.key=e.headers["sec-websocket-key"],!this.key)throw new Error("Client must provide a value for Sec-WebSocket-Key.");if(this.webSocketVersion=parseInt(e.headers["sec-websocket-version"],10),!this.webSocketVersion||isNaN(this.webSocketVersion))throw new Error("Client must provide a value for Sec-WebSocket-Version.");switch(this.webSocketVersion){case 8:case 13:break;default:var r=new Error("Unsupported websocket client version: "+this.webSocketVersion+"Only versions 8 and 13 are supported.");throw r.httpCode=426,r.headers={"Sec-WebSocket-Version":"13"},r}this.webSocketVersion===13?this.origin=e.headers.origin:this.webSocketVersion===8&&(this.origin=e.headers["sec-websocket-origin"]);var i=e.headers["sec-websocket-protocol"];if(this.protocolFullCaseMap={},this.requestedProtocols=[],i){var s=i.split(Ei);s.forEach(function(m){var c=m.toLocaleLowerCase();t.requestedProtocols.push(c),t.protocolFullCaseMap[c]=m})}if(!this.serverConfig.ignoreXForwardedFor&&e.headers["x-forwarded-for"]){var n=this.remoteAddress;this.remoteAddresses=e.headers["x-forwarded-for"].split(Da),this.remoteAddresses.push(n),this.remoteAddress=this.remoteAddresses[0]}if(this.serverConfig.parseExtensions){var o=e.headers["sec-websocket-extensions"];this.requestedExtensions=this.parseExtensions(o)}else this.requestedExtensions=[];if(this.serverConfig.parseCookies){var u=e.headers.cookie;this.cookies=this.parseCookies(u)}else this.cookies=[]},J.prototype.parseExtensions=function(t){if(!t||t.length===0)return[];var e=t.toLocaleLowerCase().split(Ei);return e.forEach(function(r,i,s){var n=r.split(Ta),o=n[0],u=n.slice(1);u.forEach(function(c,E,y){var w=c.split("="),a={name:w[0],value:w[1]};y.splice(E,1,a)});var m={name:o,params:u};s.splice(i,1,m)}),e},J.prototype.parseCookies=function(t){if(!t||typeof t!="string")return[];var e=[],r=t.split(Fa);return r.forEach(function(i){var s=i.indexOf("=");if(s===-1){e.push({name:i,value:null});return}var n=i.substr(0,s).trim(),o=i.substr(++s,i.length).trim();o[0]==='"'&&(o=o.slice(1,-1)),e.push({name:n,value:decodeURIComponent(o)})}),e},J.prototype.accept=function(t,e,r){this._verifyResolution();var i;t?(i=this.protocolFullCaseMap[t.toLocaleLowerCase()],typeof i>"u"&&(i=t)):i=t,this.protocolFullCaseMap=null;var s=xa.createHash("sha1");s.update(this.key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var n=s.digest("base64"),o=`HTTP/1.1 101 Switching Protocols\r
Upgrade: websocket\r
Connection: Upgrade\r
Sec-WebSocket-Accept: `+n+`\r
`;if(i){for(var u=0;u<i.length;u++){var m=i.charCodeAt(u),c=i.charAt(u);if(m<33||m>126||La.indexOf(c)!==-1)throw this.reject(500),new Error('Illegal character "'+String.fromCharCode(c)+'" in subprotocol.')}if(this.requestedProtocols.indexOf(t)===-1)throw this.reject(500),new Error("Specified protocol was not requested by the client.");i=i.replace(Pe,""),o+="Sec-WebSocket-Protocol: "+i+`\r
`}if(this.requestedProtocols=null,e&&(e=e.replace(Pe,""),this.webSocketVersion===13?o+="Origin: "+e+`\r
`:this.webSocketVersion===8&&(o+="Sec-WebSocket-Origin: "+e+`\r
`)),r){if(!Array.isArray(r))throw this.reject(500),new Error('Value supplied for "cookies" argument must be an array.');var E={};r.forEach(function(a){if(!a.name||!a.value)throw this.reject(500),new Error('Each cookie to set must at least provide a "name" and "value"');if(a.name=a.name.replace(st,""),a.value=a.value.replace(st,""),E[a.name])throw this.reject(500),new Error("You may not specify the same cookie name twice.");E[a.name]=!0;var h=a.name.match(Na);if(h)throw this.reject(500),new Error("Illegal character "+h[0]+" in cookie name");if(a.value.match(Ra)?h=a.value.slice(1,-1).match(yi):h=a.value.match(yi),h)throw this.reject(500),new Error("Illegal character "+h[0]+" in cookie value");var f=[a.name+"="+a.value];if(a.path){if(h=a.path.match(st),h)throw this.reject(500),new Error("Illegal character "+h[0]+" in cookie path");f.push("Path="+a.path)}if(a.domain){if(typeof a.domain!="string")throw this.reject(500),new Error("Domain must be specified and must be a string.");if(h=a.domain.match(st),h)throw this.reject(500),new Error("Illegal character "+h[0]+" in cookie domain");f.push("Domain="+a.domain.toLowerCase())}if(a.expires){if(!(a.expires instanceof Date))throw this.reject(500),new Error('Value supplied for cookie "expires" must be a vaild date object');f.push("Expires="+a.expires.toGMTString())}if(a.maxage){var p=a.maxage;if(typeof p=="string"&&(p=parseInt(p,10)),isNaN(p)||p<=0)throw this.reject(500),new Error('Value supplied for cookie "maxage" must be a non-zero number');p=Math.round(p),f.push("Max-Age="+p.toString(10))}if(a.secure){if(typeof a.secure!="boolean")throw this.reject(500),new Error('Value supplied for cookie "secure" must be of type boolean');f.push("Secure")}if(a.httponly){if(typeof a.httponly!="boolean")throw this.reject(500),new Error('Value supplied for cookie "httponly" must be of type boolean');f.push("HttpOnly")}o+="Set-Cookie: "+f.join(";")+`\r
`}.bind(this))}this._resolved=!0,this.emit("requestResolved",this),o+=`\r
`;var y=new Aa(this.socket,[],t,!1,this.serverConfig);y.webSocketVersion=this.webSocketVersion,y.remoteAddress=this.remoteAddress,y.remoteAddresses=this.remoteAddresses;var w=this;return this._socketIsClosing?bi(y):this.socket.write(o,"ascii",function(a){if(a){bi(y);return}w._removeSocketCloseListeners(),y._addSocketEventListeners()}),this.emit("requestAccepted",y),y},J.prototype.reject=function(t,e,r){this._verifyResolution(),this._resolved=!0,this.emit("requestResolved",this),typeof t!="number"&&(t=403);var i="HTTP/1.1 "+t+" "+$a[t]+`\r
Connection: close\r
`;if(e&&(e=e.replace(Pe,""),i+="X-WebSocket-Reject-Reason: "+e+`\r
`),r)for(var s in r){var n=r[s].toString().replace(Pe,""),o=s.replace(Pe,"");i+=o+": "+n+`\r
`}i+=`\r
`,this.socket.end(i,"ascii"),this.emit("requestRejected",this)},J.prototype._handleSocketCloseBeforeAccept=function(){this._socketIsClosing=!0,this._removeSocketCloseListeners()},J.prototype._removeSocketCloseListeners=function(){this.socket.removeListener("end",this._socketCloseHandler),this.socket.removeListener("close",this._socketCloseHandler)},J.prototype._verifyResolution=function(){if(this._resolved)throw new Error("WebSocketRequest may only be accepted or rejected one time.")};function bi(t){process.nextTick(function(){t.drop(1006,"TCP connection lost before handshake completed.",!0)})}var wi=J,ka=W.extend,Pa=W,Ba=ne,Ma=ti("websocket:server"),Si=Q.EventEmitter,Ua=wi,Z=function(e){Si.call(this),this._handlers={upgrade:this.handleUpgrade.bind(this),requestAccepted:this.handleRequestAccepted.bind(this),requestResolved:this.handleRequestResolved.bind(this)},this.connections=[],this.pendingRequests=[],e&&this.mount(e)};Ba.inherits(Z,Si),Z.prototype.mount=function(t){if(this.config={httpServer:null,maxReceivedFrameSize:65536,maxReceivedMessageSize:1048576,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,keepalive:!0,keepaliveInterval:2e4,dropConnectionOnKeepaliveTimeout:!0,keepaliveGracePeriod:1e4,useNativeKeepalive:!1,assembleFragments:!0,autoAcceptConnections:!1,ignoreXForwardedFor:!1,parseCookies:!0,parseExtensions:!0,disableNagleAlgorithm:!0,closeTimeout:5e3},ka(this.config,t),this.config.httpServer){Array.isArray(this.config.httpServer)||(this.config.httpServer=[this.config.httpServer]);var e=this._handlers.upgrade;this.config.httpServer.forEach(function(r){r.on("upgrade",e)})}else throw new Error("You must specify an httpServer on which to mount the WebSocket server.")},Z.prototype.unmount=function(){var t=this._handlers.upgrade;this.config.httpServer.forEach(function(e){e.removeListener("upgrade",t)})},Z.prototype.closeAllConnections=function(){this.connections.forEach(function(t){t.close()}),this.pendingRequests.forEach(function(t){process.nextTick(function(){t.reject(503)})})},Z.prototype.broadcast=function(t){Buffer.isBuffer(t)?this.broadcastBytes(t):typeof t.toString=="function"&&this.broadcastUTF(t)},Z.prototype.broadcastUTF=function(t){this.connections.forEach(function(e){e.sendUTF(t)})},Z.prototype.broadcastBytes=function(t){this.connections.forEach(function(e){e.sendBytes(t)})},Z.prototype.shutDown=function(){this.unmount(),this.closeAllConnections()},Z.prototype.handleUpgrade=function(t,e){var r=this,i=new Ua(e,t,this.config);try{i.readHandshake()}catch(s){i.reject(s.httpCode?s.httpCode:400,s.message,s.headers),Ma("Invalid handshake: %s",s.message),this.emit("upgradeError",s);return}this.pendingRequests.push(i),i.once("requestAccepted",this._handlers.requestAccepted),i.once("requestResolved",this._handlers.requestResolved),e.once("close",function(){r._handlers.requestResolved(i)}),!this.config.autoAcceptConnections&&Pa.eventEmitterListenerCount(this,"request")>0?this.emit("request",i):this.config.autoAcceptConnections?i.accept(i.requestedProtocols[0],i.origin):i.reject(404,"No handler is configured to accept the connection.")},Z.prototype.handleRequestAccepted=function(t){var e=this;t.once("close",function(r,i){e.handleConnectionClose(t,r,i)}),this.connections.push(t),this.emit("connect",t)},Z.prototype.handleConnectionClose=function(t,e,r){var i=this.connections.indexOf(t);i!==-1&&this.connections.splice(i,1),this.emit("close",t,e,r)},Z.prototype.handleRequestResolved=function(t){var e=this.pendingRequests.indexOf(t);e!==-1&&this.pendingRequests.splice(e,1)};var Ha=Z,Vt=W,ve=Vt.extend,ja=ne,_i=Q.EventEmitter,Ga=Bs,qa=Ms,Wa=vr,Za=vt,za=zt,Va=Vt.bufferAllocUnsafe,Ka=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"," ","	"],Ya=["hostname","port","method","path","headers"];function Ee(t){if(_i.call(this),this.config={maxReceivedFrameSize:1048576,maxReceivedMessageSize:8388608,fragmentOutgoingMessages:!0,fragmentationThreshold:16384,webSocketVersion:13,assembleFragments:!0,disableNagleAlgorithm:!0,closeTimeout:5e3,tlsOptions:{}},t){var e;t.tlsOptions?(e=t.tlsOptions,delete t.tlsOptions):e={},ve(this.config,t),ve(this.config.tlsOptions,e)}switch(this._req=null,this.config.webSocketVersion){case 8:case 13:break;default:throw new Error("Requested webSocketVersion is not supported. Allowed values are 8 and 13.")}}ja.inherits(Ee,_i),Ee.prototype.connect=function(t,e,r,i,s){var n=this;if(typeof e=="string"&&(e.length>0?e=[e]:e=[]),e instanceof Array||(e=[]),this.protocols=e,this.origin=r,typeof t=="string"?this.url=Wa.parse(t):this.url=t,!this.url.protocol)throw new Error("You must specify a full WebSocket URL, including protocol.");if(!this.url.host)throw new Error("You must specify a full WebSocket URL, including hostname. Relative URLs are not supported.");this.secure=this.url.protocol==="wss:",this.protocols.forEach(function(v){for(var l=0;l<v.length;l++){var d=v.charCodeAt(l),g=v.charAt(l);if(d<33||d>126||Ka.indexOf(g)!==-1)throw new Error('Protocol list contains invalid character "'+String.fromCharCode(d)+'"')}});var o={"ws:":"80","wss:":"443"};this.url.port||(this.url.port=o[this.url.protocol]);for(var u=Va(16),m=0;m<16;m++)u[m]=Math.round(Math.random()*255);this.base64nonce=u.toString("base64");var c=this.url.hostname;(this.url.protocol==="ws:"&&this.url.port!=="80"||this.url.protocol==="wss:"&&this.url.port!=="443")&&(c+=":"+this.url.port);var E={};this.secure&&this.config.tlsOptions.hasOwnProperty("headers")&&ve(E,this.config.tlsOptions.headers),i&&ve(E,i),ve(E,{Upgrade:"websocket",Connection:"Upgrade","Sec-WebSocket-Version":this.config.webSocketVersion.toString(10),"Sec-WebSocket-Key":this.base64nonce,Host:E.Host||c}),this.protocols.length>0&&(E["Sec-WebSocket-Protocol"]=this.protocols.join(", ")),this.origin&&(this.config.webSocketVersion===13?E.Origin=this.origin:this.config.webSocketVersion===8&&(E["Sec-WebSocket-Origin"]=this.origin));var y;this.url.pathname?y=this.url.path:this.url.path?y="/"+this.url.path:y="/";function w(v){n._req=null,n.emit("connectFailed",v)}var a={agent:!1};if(s&&ve(a,s),ve(a,{hostname:this.url.hostname,port:this.url.port,method:"GET",path:y,headers:E}),this.secure){var h=this.config.tlsOptions;for(var f in h)h.hasOwnProperty(f)&&Ya.indexOf(f)===-1&&(a[f]=h[f])}var p=this._req=(this.secure?qa:Ga).request(a);p.on("upgrade",function(l,d,g){n._req=null,p.removeListener("error",w),n.socket=d,n.response=l,n.firstDataChunk=g,n.validateHandshake()}),p.on("error",w),p.on("response",function(v){if(n._req=null,Vt.eventEmitterListenerCount(n,"httpResponse")>0)n.emit("httpResponse",v,n),v.socket&&v.socket.end();else{var l=[];for(var d in v.headers)l.push(d+": "+v.headers[d]);n.failHandshake("Server responded with a non-101 status: "+v.statusCode+" "+v.statusMessage+`
Response Headers Follow:
`+l.join(`
`)+`
`)}}),p.end()},Ee.prototype.validateHandshake=function(){var t=this.response.headers;if(this.protocols.length>0)if(this.protocol=t["sec-websocket-protocol"],this.protocol){if(this.protocols.indexOf(this.protocol)===-1){this.failHandshake("Server did not respond with a requested protocol.");return}}else{this.failHandshake("Expected a Sec-WebSocket-Protocol header.");return}if(!(t.connection&&t.connection.toLocaleLowerCase()==="upgrade")){this.failHandshake("Expected a Connection: Upgrade header from the server");return}if(!(t.upgrade&&t.upgrade.toLocaleLowerCase()==="websocket")){this.failHandshake("Expected an Upgrade: websocket header from the server");return}var e=Za.createHash("sha1");e.update(this.base64nonce+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var r=e.digest("base64");if(!t["sec-websocket-accept"]){this.failHandshake("Expected Sec-WebSocket-Accept header from server");return}if(t["sec-websocket-accept"]!==r){this.failHandshake("Sec-WebSocket-Accept header from server didn't match expected value of "+r);return}this.succeedHandshake()},Ee.prototype.failHandshake=function(t){this.socket&&this.socket.writable&&this.socket.end(),this.emit("connectFailed",new Error(t))},Ee.prototype.succeedHandshake=function(){var t=new za(this.socket,[],this.protocol,!0,this.config);t.webSocketVersion=this.config.webSocketVersion,t._addSocketEventListeners(),this.emit("connect",t),this.firstDataChunk.length>0&&t.handleSocketData(this.firstDataChunk),this.firstDataChunk=null},Ee.prototype.abort=function(){this._req&&this._req.abort()};var Ci=Ee,Xa=ne,xi=Q.EventEmitter;function nt(t,e){xi.call(this),this.webSocketRequest=t,e==="____no_protocol____"?this.protocol=null:this.protocol=e,this.origin=t.origin,this.resource=t.resource,this.resourceURL=t.resourceURL,this.httpRequest=t.httpRequest,this.remoteAddress=t.remoteAddress,this.webSocketVersion=t.webSocketVersion,this.requestedExtensions=t.requestedExtensions,this.cookies=t.cookies}Xa.inherits(nt,xi),nt.prototype.accept=function(t,e){var r=this.webSocketRequest.accept(this.protocol,t,e);return this.emit("requestAccepted",r),r},nt.prototype.reject=function(t,e,r){this.webSocketRequest.reject(t,e,r),this.emit("requestRejected",this)};var Ja=nt,Qa=W.extend,ec=ne,Ii=Q.EventEmitter,tc=Ja;function se(t){Ii.call(this),this.config={server:null},t&&Qa(this.config,t),this.handlers=[],this._requestHandler=this.handleRequest.bind(this),this.config.server&&this.attachServer(this.config.server)}ec.inherits(se,Ii),se.prototype.attachServer=function(t){if(t)this.server=t,this.server.on("request",this._requestHandler);else throw new Error("You must specify a WebSocketServer instance to attach to.")},se.prototype.detachServer=function(){if(this.server)this.server.removeListener("request",this._requestHandler),this.server=null;else throw new Error("Cannot detach from server: not attached.")},se.prototype.mount=function(t,e,r){if(!t)throw new Error("You must specify a path for this handler.");if(e||(e="____no_protocol____"),!r)throw new Error("You must specify a callback for this handler.");if(t=this.pathToRegExp(t),!(t instanceof RegExp))throw new Error("Path must be specified as either a string or a RegExp.");var i=t.toString();if(e=e.toLocaleLowerCase(),this.findHandlerIndex(i,e)!==-1)throw new Error("You may only mount one handler per path/protocol combination.");this.handlers.push({path:t,pathString:i,protocol:e,callback:r})},se.prototype.unmount=function(t,e){var r=this.findHandlerIndex(this.pathToRegExp(t).toString(),e);if(r!==-1)this.handlers.splice(r,1);else throw new Error("Unable to find a route matching the specified path and protocol.")},se.prototype.findHandlerIndex=function(t,e){e=e.toLocaleLowerCase();for(var r=0,i=this.handlers.length;r<i;r++){var s=this.handlers[r];if(s.pathString===t&&s.protocol===e)return r}return-1},se.prototype.pathToRegExp=function(t){return typeof t=="string"&&(t==="*"?t=/^.*$/:(t=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t=new RegExp("^"+t+"$"))),t},se.prototype.handleRequest=function(t){var e=t.requestedProtocols;e.length===0&&(e=["____no_protocol____"]);for(var r=0;r<e.length;r++)for(var i=e[r].toLocaleLowerCase(),s=0,n=this.handlers.length;s<n;s++){var o=this.handlers[s];if(o.path.test(t.resourceURL.pathname)&&(i===o.protocol||o.protocol==="*")){var u=new tc(t,i);o.callback(u);return}}t.reject(404,"No handler is available for the given request.")};var rc=se,ic=Kt;Kt.strict=Oi,Kt.loose=Ai;var sc=Object.prototype.toString,nc={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function Kt(t){return Oi(t)||Ai(t)}function Oi(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function Ai(t){return nc[sc.call(t)]}var oc=ic.strict,ac=function(e){if(oc(e)){var r=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(r=r.slice(e.byteOffset,e.byteOffset+e.byteLength)),r}else return Buffer.from(e)},cc=Ti;function Ti(){typeof this.addEventListener!="function"&&(this._listeners={},this.addEventListener=lc,this.removeEventListener=hc,this.dispatchEvent=uc)}Object.defineProperties(Ti.prototype,{listeners:{get:function(){return this._listeners}}});function lc(t,e){var r,i,s;if(!(!t||!e)){for(r=this._listeners[t],r===void 0&&(this._listeners[t]=r=[]),i=0;s=r[i];i++)if(s===e)return;r.push(e)}}function hc(t,e){var r,i,s;if(!(!t||!e)&&(r=this._listeners[t],r!==void 0)){for(i=0;s=r[i];i++)if(s===e){r.splice(i,1);break}r.length===0&&delete this._listeners[t]}}function uc(t){var e,r,i,s=!1,n,o;if(!t||typeof t.type!="string")throw new Error("`event` must have a valid `type` property");t._yaeti&&(t.target=this,t.cancelable=!0);try{t.stopImmediatePropagation=function(){s=!0}}catch{}for(e=t.type,r=this._listeners[e]||[],i=this["on"+e],typeof i=="function"&&i.call(this,t),n=0;(o=r[n])&&!s;n++)o.call(this,t);return!t.defaultPrevented}var fc=dc;function dc(t){this.type=t,this.isTrusted=!1,this._yaeti=!0}var pc={EventTarget:cc,Event:fc},mc=Ci,gc=ac,Be=pc;const ot=0,Me=1,Yt=2,at=3;var vc=ye;function ye(t,e,r,i,s,n){Be.EventTarget.call(this),n=n||{},n.assembleFragments=!0;var o=this;this._url=t,this._readyState=ot,this._protocol=void 0,this._extensions="",this._bufferedAmount=0,this._binaryType="arraybuffer",this._connection=void 0,this._client=new mc(n),this._client.on("connect",function(u){Ec.call(o,u)}),this._client.on("connectFailed",function(){Ni.call(o)}),this._client.connect(t,e,r,i,s)}Object.defineProperties(ye.prototype,{url:{get:function(){return this._url}},readyState:{get:function(){return this._readyState}},protocol:{get:function(){return this._protocol}},extensions:{get:function(){return this._extensions}},bufferedAmount:{get:function(){return this._bufferedAmount}}}),Object.defineProperties(ye.prototype,{binaryType:{get:function(){return this._binaryType},set:function(t){if(t!=="arraybuffer")throw new SyntaxError('just "arraybuffer" type allowed for "binaryType" attribute');this._binaryType=t}}}),[["CONNECTING",ot],["OPEN",Me],["CLOSING",Yt],["CLOSED",at]].forEach(function(t){Object.defineProperty(ye.prototype,t[0],{get:function(){return t[1]}})}),[["CONNECTING",ot],["OPEN",Me],["CLOSING",Yt],["CLOSED",at]].forEach(function(t){Object.defineProperty(ye,t[0],{get:function(){return t[1]}})}),ye.prototype.send=function(t){if(this._readyState!==Me)throw new Error("cannot call send() while not connected");if(typeof t=="string"||t instanceof String)this._connection.sendUTF(t);else if(t instanceof Buffer)this._connection.sendBytes(t);else if(t.byteLength||t.byteLength===0)t=gc(t),this._connection.sendBytes(t);else throw new Error("unknown binary data:",t)},ye.prototype.close=function(t,e){switch(this._readyState){case ot:Ni.call(this),this._client.on("connect",function(r){t?r.close(t,e):r.close()});break;case Me:this._readyState=Yt,t?this._connection.close(t,e):this._connection.close();break}};function Di(t,e){var r=new Be.Event("close");return r.code=t,r.reason=e,r.wasClean=typeof t>"u"||t===1e3,r}function Li(t){var e=new Be.Event("message");return e.data=t,e}function Ec(t){var e=this;this._readyState=Me,this._connection=t,this._protocol=t.protocol,this._extensions=t.extensions,this._connection.on("close",function(r,i){yc.call(e,r,i)}),this._connection.on("message",function(r){bc.call(e,r)}),this.dispatchEvent(new Be.Event("open"))}function Ni(){Ri.call(this),this._readyState=at;try{this.dispatchEvent(new Be.Event("error"))}finally{this.dispatchEvent(Di(1006,"connection failed"))}}function yc(t,e){Ri.call(this),this._readyState=at,this.dispatchEvent(Di(t,e||""))}function bc(t){if(t.utf8Data)this.dispatchEvent(Li(t.utf8Data));else if(t.binaryData&&this.binaryType==="arraybuffer"){for(var e=t.binaryData,r=new ArrayBuffer(e.length),i=new Uint8Array(r),s=0,n=e.length;s<n;++s)i[s]=e[s];this.dispatchEvent(Li(r))}}function Ri(){this._client.removeAllListeners(),this._connection&&this._connection.removeAllListeners()}var wc={disableWarnings:!1,deprecationWarningMap:{},warn:function(t){!this.disableWarnings&&this.deprecationWarningMap[t]&&(console.warn("DEPRECATION WARNING: "+this.deprecationWarningMap[t]),this.deprecationWarningMap[t]=!1)}},Sc=wc;const Fi="websocket",$i="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",ki=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Pi="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Bi=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Mi="1.0.35",Ui={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Hi="https://github.com/theturtle32/WebSocket-Node",ji={node:">=4.0.0"},Gi={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.63","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},qi={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Wi={verbose:!1},Zi={test:"tape test/unit/*.js",gulp:"gulp"},zi="index",Vi={lib:"./lib"},Ki="lib/browser.js",Yi="Apache-2.0",_c={name:Fi,description:$i,keywords:ki,author:Pi,contributors:Bi,version:Mi,repository:Ui,homepage:Hi,engines:ji,dependencies:Gi,devDependencies:qi,config:Wi,scripts:Zi,main:zi,directories:Vi,browser:Ki,license:Yi},Cc={__proto__:null,author:Pi,browser:Ki,config:Wi,contributors:Bi,default:_c,dependencies:Gi,description:$i,devDependencies:qi,directories:Vi,engines:ji,homepage:Hi,keywords:ki,license:Yi,main:zi,name:Fi,repository:Ui,scripts:Zi,version:Mi},xc=Hs(Cc);var Ic=xc.version,Oc={server:Ha,client:Ci,router:rc,frame:hi,request:wi,connection:zt,w3cwebsocket:vc,deprecation:Sc,version:Ic},Xi=Oc,Ji={exports:{}};/*!
 * node-progress
 * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */(function(t,e){t.exports=r;function r(i,s){if(this.stream=s.stream||process.stderr,typeof s=="number"){var n=s;s={},s.total=n}else{if(s=s||{},typeof i!="string")throw new Error("format required");if(typeof s.total!="number")throw new Error("total required")}this.fmt=i,this.curr=s.curr||0,this.total=s.total,this.width=s.width||this.total,this.clear=s.clear,this.chars={complete:s.complete||"=",incomplete:s.incomplete||"-",head:s.head||s.complete||"="},this.renderThrottle=s.renderThrottle!==0?s.renderThrottle||16:0,this.lastRender=-1/0,this.callback=s.callback||function(){},this.tokens={},this.lastDraw=""}r.prototype.tick=function(i,s){if(i!==0&&(i=i||1),typeof i=="object"&&(s=i,i=1),s&&(this.tokens=s),this.curr==0&&(this.start=new Date),this.curr+=i,this.render(),this.curr>=this.total){this.render(void 0,!0),this.complete=!0,this.terminate(),this.callback(this);return}},r.prototype.render=function(i,s){if(s=s!==void 0?s:!1,i&&(this.tokens=i),!!this.stream.isTTY){var n=Date.now(),o=n-this.lastRender;if(!(!s&&o<this.renderThrottle)){this.lastRender=n;var u=this.curr/this.total;u=Math.min(Math.max(u,0),1);var m=Math.floor(u*100),c,E,y,w=new Date-this.start,a=m==100?0:w*(this.total/this.curr-1),h=this.curr/(w/1e3),f=this.fmt.replace(":current",this.curr).replace(":total",this.total).replace(":elapsed",isNaN(w)?"0.0":(w/1e3).toFixed(1)).replace(":eta",isNaN(a)||!isFinite(a)?"0.0":(a/1e3).toFixed(1)).replace(":percent",m.toFixed(0)+"%").replace(":rate",Math.round(h)),p=Math.max(0,this.stream.columns-f.replace(":bar","").length);p&&process.platform==="win32"&&(p=p-1);var v=Math.min(this.width,p);if(y=Math.round(v*u),E=Array(Math.max(0,y+1)).join(this.chars.complete),c=Array(Math.max(0,v-y+1)).join(this.chars.incomplete),y>0&&(E=E.slice(0,-1)+this.chars.head),f=f.replace(":bar",E+c),this.tokens)for(var l in this.tokens)f=f.replace(":"+l,this.tokens[l]);this.lastDraw!==f&&(this.stream.cursorTo(0),this.stream.write(f),this.stream.clearLine(1),this.lastDraw=f)}}},r.prototype.update=function(i,s){var n=Math.floor(i*this.total),o=n-this.curr;this.tick(o,s)},r.prototype.interrupt=function(i){this.stream.clearLine(),this.stream.cursorTo(0),this.stream.write(i),this.stream.write(`
`),this.stream.write(this.lastDraw)},r.prototype.terminate=function(){this.clear?this.stream.clearLine&&(this.stream.clearLine(),this.stream.cursorTo(0)):this.stream.write(`
`)}})(Ji);var Ac=Ji.exports,Tc=Ac;const Dc=Se(Tc);function Lc(t,e){var r=t;e.slice(0,-1).forEach(function(s){r=r[s]||{}});var i=e[e.length-1];return i in r}function Qi(t){return typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}function es(t,e){return e==="constructor"&&typeof t[e]=="function"||e==="__proto__"}var Nc=function(t,e){e||(e={});var r={bools:{},strings:{},unknownFn:null};typeof e.unknown=="function"&&(r.unknownFn=e.unknown),typeof e.boolean=="boolean"&&e.boolean?r.allBools=!0:[].concat(e.boolean).filter(Boolean).forEach(function(g){r.bools[g]=!0});var i={};function s(g){return i[g].some(function(b){return r.bools[b]})}Object.keys(e.alias||{}).forEach(function(g){i[g]=[].concat(e.alias[g]),i[g].forEach(function(b){i[b]=[g].concat(i[g].filter(function(_){return b!==_}))})}),[].concat(e.string).filter(Boolean).forEach(function(g){r.strings[g]=!0,i[g]&&[].concat(i[g]).forEach(function(b){r.strings[b]=!0})});var n=e.default||{},o={_:[]};function u(g,b){return r.allBools&&/^--[^=]+$/.test(b)||r.strings[g]||r.bools[g]||i[g]}function m(g,b,_){for(var S=g,L=0;L<b.length-1;L++){var O=b[L];if(es(S,O))return;S[O]===void 0&&(S[O]={}),(S[O]===Object.prototype||S[O]===Number.prototype||S[O]===String.prototype)&&(S[O]={}),S[O]===Array.prototype&&(S[O]=[]),S=S[O]}var A=b[b.length-1];es(S,A)||((S===Object.prototype||S===Number.prototype||S===String.prototype)&&(S={}),S===Array.prototype&&(S=[]),S[A]===void 0||r.bools[A]||typeof S[A]=="boolean"?S[A]=_:Array.isArray(S[A])?S[A].push(_):S[A]=[S[A],_])}function c(g,b,_){if(!(_&&r.unknownFn&&!u(g,_)&&r.unknownFn(_)===!1)){var S=!r.strings[g]&&Qi(b)?Number(b):b;m(o,g.split("."),S),(i[g]||[]).forEach(function(L){m(o,L.split("."),S)})}}Object.keys(r.bools).forEach(function(g){c(g,n[g]===void 0?!1:n[g])});var E=[];t.indexOf("--")!==-1&&(E=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var y=0;y<t.length;y++){var w=t[y],a,h;if(/^--.+=/.test(w)){var f=w.match(/^--([^=]+)=([\s\S]*)$/);a=f[1];var p=f[2];r.bools[a]&&(p=p!=="false"),c(a,p,w)}else if(/^--no-.+/.test(w))a=w.match(/^--no-(.+)/)[1],c(a,!1,w);else if(/^--.+/.test(w))a=w.match(/^--(.+)/)[1],h=t[y+1],h!==void 0&&!/^(-|--)[^-]/.test(h)&&!r.bools[a]&&!r.allBools&&(!i[a]||!s(a))?(c(a,h,w),y+=1):/^(true|false)$/.test(h)?(c(a,h==="true",w),y+=1):c(a,r.strings[a]?"":!0,w);else if(/^-[^-]+/.test(w)){for(var v=w.slice(1,-1).split(""),l=!1,d=0;d<v.length;d++){if(h=w.slice(d+2),h==="-"){c(v[d],h,w);continue}if(/[A-Za-z]/.test(v[d])&&h[0]==="="){c(v[d],h.slice(1),w),l=!0;break}if(/[A-Za-z]/.test(v[d])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(h)){c(v[d],h,w),l=!0;break}if(v[d+1]&&v[d+1].match(/\W/)){c(v[d],w.slice(d+2),w),l=!0;break}else c(v[d],r.strings[v[d]]?"":!0,w)}a=w.slice(-1)[0],!l&&a!=="-"&&(t[y+1]&&!/^(-|--)[^-]/.test(t[y+1])&&!r.bools[a]&&(!i[a]||!s(a))?(c(a,t[y+1],w),y+=1):t[y+1]&&/^(true|false)$/.test(t[y+1])?(c(a,t[y+1]==="true",w),y+=1):c(a,r.strings[a]?"":!0,w))}else if((!r.unknownFn||r.unknownFn(w)!==!1)&&o._.push(r.strings._||!Qi(w)?w:Number(w)),e.stopEarly){o._.push.apply(o._,t.slice(y+1));break}}return Object.keys(n).forEach(function(g){Lc(o,g.split("."))||(m(o,g.split("."),n[g]),(i[g]||[]).forEach(function(b){m(o,b.split("."),n[g])}))}),e["--"]?o["--"]=E.slice():E.forEach(function(g){o._.push(g)}),o};const ts=Se(Nc),Rc=()=>Buffer.from("aW1wb3J0IHsgZGVmaW5lQ29uZmlnLCBub3JtYWxpemVQYXRoIH0gZnJvbSAndml0ZSc7DQoNCi8qKiBAcmV0dXJucyB7aW1wb3J0KCd2aXRlJykuUGx1Z2lufSAqLw0KZnVuY3Rpb24gY29wb250c1BsdWdpbigpIHsNCiAgcmV0dXJuIHsNCiAgICBuYW1lOiAnY29wb250cy1wbHVnaW4nLA0KICAgIGVuZm9yY2U6ICdwb3N0JywNCiAgICBhcHBseTogKGNvbmZpZywgeyBtb2RlLCBjb21tYW5kIH0pID0+IHsNCiAgICAgIHJldHVybiBjb21tYW5kID09PSAnYnVpbGQnICYmICFjb25maWcuYnVpbGQuc3NyOw0KICAgIH0sDQogICAgY29uZmlnOiAoKSA9PiAoew0KICAgICAgbG9nTGV2ZWw6ICdlcnJvcicsDQogICAgICBidWlsZDogew0KICAgICAgICB3cml0ZTogZmFsc2UNCiAgICAgIH0NCiAgICB9KSwNCiAgICBnZW5lcmF0ZUJ1bmRsZTogew0KICAgICAgYXN5bmMgaGFuZGxlcigpIHsNCiAgICAgICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKHRoaXMuZ2V0TW9kdWxlSWRzKCkpLnJlZHVjZSgoYXJyLCBwYXRoKSA9PiB7DQogICAgICAgICAgcGF0aCA9IHBhdGguaW5kZXhPZignXDAnKSA8IDAgPyBwYXRoIDogcGF0aC5yZXBsYWNlKCdcMCcsICcnKTsNCg0KICAgICAgICAgIGNvbnN0IGZpbGUgPSBub3JtYWxpemVQYXRoKHBhdGgpLnNwbGl0KCc/JylbMF07DQogICAgICAgICAgaWYgKCFhcnIuaW5jbHVkZXMoZmlsZSkpIHsNCiAgICAgICAgICAgIGFyci5wdXNoKGZpbGUpOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gYXJyOw0KICAgICAgICB9LCBbXSk7DQoNCiAgICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoSlNPTi5zdHJpbmdpZnkoZmlsZXMpKTsNCiAgICAgIH0NCiAgICB9DQogIH07DQp9DQo=","base64").toString(),ue=new class{template;input;defInput=new Map([["vue","src/main.js"],["vue-ts","src/main.ts"],["react","src/main.jsx"],["react-ts","src/main.tsx"]]);support=Array.from(this.defInput.keys());pluginCode=Rc();cmdArgv={};constructor(){const t=ts(process.argv.slice(2),{alias:{h:"help",t:"template",i:"input"}});this.setTemplate(t.template||t.t),this.setInput(t.input||t.i)}setTemplate(t){t&&(this.template=t)}setInput(t){t&&(this.input=t)}getInput(){return this.input??this.defInput.get(this.template)}isSupportTemplate(t){return this.support.includes(t)}},rs=pe.join(Er.tmpdir(),Buffer.from("coponts.token").toString("base64"));function Fc(t){oe.writeFileSync(rs,t)}function $c(){return oe.readFileSync(rs).toString()}async function kc(t){const e=await fetch(t),r=e.headers.get("content-length");if(r&&e.body){const s=parseInt(r,10),n=[];var i=new Dc("  downloading [:bar] :percent :elapseds",{complete:"=",incomplete:" ",width:20,total:s,clear:!1});for await(const o of e.body)i.tick(o.length),n.push(o);return new Blob(n)}}function Pc(){return oe.existsSync(pe.join(process.cwd(),"composer.json"))?"resources":"src"}const Bc=new Map([["vue","import vue from '@vitejs/plugin-vue';"],["react","import react from '@vitejs/plugin-react';"]]),Mc=`{
  "@": "/src"
}`;function Uc(){let t=oe.readFileSync(pe.join(process.cwd(),"vite.config.js"),"utf-8");t=t.replace(/\s/g,"");const e=t.match(/alias:({[^}]*})/),r=t.match(/alias:(\[[^\]]*\])/);let i;return e&&e[1]&&(i=e[1]),r&&r[1]&&(i=r[1]),i}function Hc(t,e){const r=t.split("-")[0],i=Bc.get(r),s=ue.pluginCode,n=`export default defineConfig({
  mode: 'coponts',
  plugins: [${r}(), copontsPlugin()],
  build: {
    rollupOptions: {
      input: '${e||"src/main.js"}'
    }
  },
  resolve: {
    alias: ${Uc()??Mc}
  }
});`,o=pe.join(jc(),`${t}.config.js`);return oe.writeFileSync(o,[i,s,n].join(Er.EOL)),o}function jc(){let t=!0,e=process.cwd(),r;for(;t;)r=pe.join(e,"node_modules"),oe.existsSync(r)&&oe.statSync(r).isDirectory()?t=!1:(pe.parse(e).root==e&&(t=!1,r=void 0),e=pe.dirname(e));if(r)return r;throw new Error("Not find node_modules.")}var Gc=(t=>(t.open="0",t.close="1",t.ping="2",t.pong="3",t.message="4",t.upgrade="5",t.noop="6",t))(Gc||{});const ct=new class{lock;timer;stranded=[];socket;flag=!1;calls=new Map;constructor(){this.connect()}connect(){this.socket=new Xi.w3cwebsocket("ws://127.0.0.1:3000",[],"",{authorization:`Bearer ${$c()}`}),this.socket.onmessage=async t=>{let{data:e}=t;if(e instanceof Blob&&(e=await e.text()),e=="2")this.socket.send("3");else if(typeof e=="string"&&e.length>1&&e.charAt(0)=="4"){const r=JSON.parse(e.substring(1));if(r instanceof Array&&r.length>0){const i=r[0],s=this.calls.get(i);s&&s(r[1])}}},this.socket.onopen=()=>{for(this.clearTimer();this.stranded.length;)this.send(this.stranded.shift())},this.socket.onerror=t=>{},this.socket.onclose=()=>{this.reconnect()}}reconnect(){this.lock||this.flag||(this.lock=!0,this.clearTimer(),this.timer=setTimeout(()=>{this.connect(),this.lock=!1},1500))}clearTimer(){this.timer&&clearTimeout(this.timer)}on(t,e){this.calls.has(t)||this.calls.set(t,e)}emit(t,e,r){const i=(Date.now()+Math.floor(Math.random()*1e4)).toString(32);typeof e=="function"&&(r=e,e="");let s=[t,e??"",r?i:""];r||(s=s.filter(n=>n)),r&&this.calls.set(i,(...n)=>{r(...n),this.calls.delete(i)}),this.send(s)}send(t){if(this.socket.readyState==Xi.w3cwebsocket.OPEN){const e="4"+JSON.stringify(t);this.socket.send(e)}else this.stranded.push(t)}close(){this.flag=!0,this.socket.close()}async emitAsync(t,e=""){return new Promise((r,i)=>{try{const s=setTimeout(()=>{r(void 0)},1e4);this.emit(t,e,n=>{clearTimeout(s),r(n)})}catch(s){i(s)}})}},Ue=new class{flag=!1;values=[];activeId=0;async all(){if(!this.flag){const t=await ct.emitAsync("projects")??[];this.values=t,this.flag=!0}return this.values}get(t){return this.values.find(e=>e.id=t)}set(t){this.values.unshift(t)}setActive(t){this.activeId=t}},Xt=new class{constructor(){}async login(){return await Nt([{type:"text",name:"email",message:ee.reset("Email:")},{type:"password",name:"password",message:ee.reset("Password:")}],{onCancel:()=>{throw new Error("Operation cancelled")}})}async selectProject(){const t=(await Ue.all()).slice(0);t.unshift({id:0,name:ee.blue("Create a new project")});let e=t.findIndex(s=>s.id==Ue.activeId);e<0&&(e=0),!e&&t.length>1&&(e=1);let{project:r,createName:i}=await Nt([{type:"select",name:"project",message:ee.reset("Select a project"),initial:e,choices:t.map(s=>({title:s.name,value:s}))},{type:(s,{project:n})=>n.id==0?"text":null,name:"createName",message:ee.reset("Project name:")}],{onCancel:()=>{throw new Error("Operation cancelled")}});return i&&(r=await ct.emitAsync("createProject",{name:i}),Ue.set(r)),Ue.setActive(r.id),r}async toggle({message:t}={}){let{value:e}=await Nt([{type:"toggle",name:"value",message:t??"Can you confirm?",initial:!0,active:"yes",inactive:"no"}]);return e}};var xe={exports:{}},is={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24},lt={};(function(t){const e={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function r(i){return function(...s){return s.length&&(i=i.replace(/\{(\d)\}/g,(n,o)=>s[o]||"")),new Error("ADM-ZIP: "+i)}}for(const i of Object.keys(e))t[i]=r(e[i])})(lt);const qc=we,j=de,ss=is,Wc=lt,Zc=typeof process=="object"&&process.platform==="win32",ns=t=>typeof t=="object"&&t!==null,os=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e>>>=1;return e>>>0});function B(t){this.sep=j.sep,this.fs=qc,ns(t)&&ns(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}var zc=B;B.prototype.makeDir=function(t){const e=this;function r(i){let s=i.split(e.sep)[0];i.split(e.sep).forEach(function(n){if(!(!n||n.substr(-1,1)===":")){s+=e.sep+n;var o;try{o=e.fs.statSync(s)}catch{e.fs.mkdirSync(s)}if(o&&o.isFile())throw Wc.FILE_IN_THE_WAY(`"${s}"`)}})}r(t)},B.prototype.writeFileTo=function(t,e,r,i){const s=this;if(s.fs.existsSync(t)){if(!r)return!1;var n=s.fs.statSync(t);if(n.isDirectory())return!1}var o=j.dirname(t);s.fs.existsSync(o)||s.makeDir(o);var u;try{u=s.fs.openSync(t,"w",438)}catch{s.fs.chmodSync(t,438),u=s.fs.openSync(t,"w",438)}if(u)try{s.fs.writeSync(u,e,0,e.length,0)}finally{s.fs.closeSync(u)}return s.fs.chmodSync(t,i||438),!0},B.prototype.writeFileToAsync=function(t,e,r,i,s){typeof i=="function"&&(s=i,i=void 0);const n=this;n.fs.exists(t,function(o){if(o&&!r)return s(!1);n.fs.stat(t,function(u,m){if(o&&m.isDirectory())return s(!1);var c=j.dirname(t);n.fs.exists(c,function(E){E||n.makeDir(c),n.fs.open(t,"w",438,function(y,w){y?n.fs.chmod(t,438,function(){n.fs.open(t,"w",438,function(a,h){n.fs.write(h,e,0,e.length,0,function(){n.fs.close(h,function(){n.fs.chmod(t,i||438,function(){s(!0)})})})})}):w?n.fs.write(w,e,0,e.length,0,function(){n.fs.close(w,function(){n.fs.chmod(t,i||438,function(){s(!0)})})}):n.fs.chmod(t,i||438,function(){s(!0)})})})})})},B.prototype.findFiles=function(t){const e=this;function r(i,s,n){typeof s=="boolean"&&(n=s,s=void 0);let o=[];return e.fs.readdirSync(i).forEach(function(u){const m=j.join(i,u),c=e.fs.statSync(m);(!s||s.test(m))&&o.push(j.normalize(m)+(c.isDirectory()?e.sep:"")),c.isDirectory()&&n&&(o=o.concat(r(m,s,n)))}),o}return r(t,void 0,!0)},B.prototype.findFilesAsync=function(t,e){const r=this;let i=[];r.fs.readdir(t,function(s,n){if(s)return e(s);let o=n.length;if(!o)return e(null,i);n.forEach(function(u){u=j.join(t,u),r.fs.stat(u,function(m,c){if(m)return e(m);c&&(i.push(j.normalize(u)+(c.isDirectory()?r.sep:"")),c.isDirectory()?r.findFilesAsync(u,function(E,y){if(E)return e(E);i=i.concat(y),--o||e(null,i)}):--o||e(null,i))})})})},B.prototype.getAttributes=function(){},B.prototype.setAttributes=function(){},B.crc32update=function(t,e){return os[(t^e)&255]^t>>>8},B.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,r=-1;for(let i=0;i<e;)r=B.crc32update(r,t[i++]);return~r>>>0},B.methodToString=function(t){switch(t){case ss.STORED:return"STORED ("+t+")";case ss.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}},B.canonical=function(t){if(!t)return"";const e=j.posix.normalize("/"+t.split("\\").join("/"));return j.join(".",e)},B.zipnamefix=function(t){if(!t)return"";const e=j.posix.normalize("/"+t.split("\\").join("/"));return j.posix.join(".",e)},B.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");const r=t.length>>>0;for(let i=r-1;i>=0;i--)if(e(t[i],i,t))return t[i]},B.sanitize=function(t,e){t=j.resolve(j.normalize(t));for(var r=e.split("/"),i=0,s=r.length;i<s;i++){var n=j.normalize(j.join(t,r.slice(i,s).join(j.sep)));if(n.indexOf(t)===0)return n}return j.normalize(j.join(t,j.basename(e)))},B.toBuffer=function(e,r){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?r(e):Buffer.alloc(0)},B.readBigUInt64LE=function(t,e){var r=Buffer.from(t.slice(e,e+8));return r.swap64(),parseInt(`0x${r.toString("hex")}`)},B.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)},B.fromDate2DOS=function(t){let e=0,r=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),r=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|r},B.isWin=Zc,B.crcTable=os;const Vc=de;var Kc=function(t,{fs:e}){var r=t||"",i=n(),s=null;function n(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return r&&e.existsSync(r)?(s=e.statSync(r),i.directory=s.isDirectory(),i.mtime=s.mtime,i.atime=s.atime,i.executable=(73&s.mode)!==0,i.readonly=(128&s.mode)===0,i.hidden=Vc.basename(r)[0]==="."):console.warn("Invalid path: "+r),{get directory(){return i.directory},get readOnly(){return i.readonly},get hidden(){return i.hidden},get mtime(){return i.mtime},get atime(){return i.atime},get executable(){return i.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:r,isDirectory:i.directory,isReadOnly:i.readonly,isHidden:i.hidden,isExecutable:i.executable,mTime:i.mtime,aTime:i.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}},Yc={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")};xe.exports=zc,xe.exports.Constants=is,xe.exports.Errors=lt,xe.exports.FileAttr=Kc,xe.exports.decoder=Yc;var He=xe.exports,ht={},fe=He,C=fe.Constants,Xc=function(){var t=20,e=10,r=0,i=0,s=0,n=0,o=0,u=0,m=0,c=0,E=0,y=0,w=0,a=0,h=0;t|=fe.isWin?2560:768,r|=C.FLG_EFS;const f={extraLen:0},p=l=>Math.max(0,l)>>>0,v=l=>Math.max(0,l)&255;return s=fe.fromDate2DOS(new Date),{get made(){return t},set made(l){t=l},get version(){return e},set version(l){e=l},get flags(){return r},set flags(l){r=l},get flags_efs(){return(r&C.FLG_EFS)>0},set flags_efs(l){l?r|=C.FLG_EFS:r&=~C.FLG_EFS},get flags_desc(){return(r&C.FLG_DESC)>0},set flags_desc(l){l?r|=C.FLG_DESC:r&=~C.FLG_DESC},get method(){return i},set method(l){switch(l){case C.STORED:this.version=10;case C.DEFLATED:default:this.version=20}i=l},get time(){return fe.fromDOS2Date(this.timeval)},set time(l){this.timeval=fe.fromDate2DOS(l)},get timeval(){return s},set timeval(l){s=p(l)},get timeHighByte(){return v(s>>>8)},get crc(){return n},set crc(l){n=p(l)},get compressedSize(){return o},set compressedSize(l){o=p(l)},get size(){return u},set size(l){u=p(l)},get fileNameLength(){return m},set fileNameLength(l){m=l},get extraLength(){return c},set extraLength(l){c=l},get extraLocalLength(){return f.extraLen},set extraLocalLength(l){f.extraLen=l},get commentLength(){return E},set commentLength(l){E=l},get diskNumStart(){return y},set diskNumStart(l){y=p(l)},get inAttr(){return w},set inAttr(l){w=p(l)},get attr(){return a},set attr(l){a=p(l)},get fileAttr(){return(a||0)>>16&4095},get offset(){return h},set offset(l){h=p(l)},get encrypted(){return(r&C.FLG_ENC)===C.FLG_ENC},get centralHeaderSize(){return C.CENHDR+m+c+E},get realDataOffset(){return h+C.LOCHDR+f.fnameLen+f.extraLen},get localHeader(){return f},loadLocalHeaderFromBinary:function(l){var d=l.slice(h,h+C.LOCHDR);if(d.readUInt32LE(0)!==C.LOCSIG)throw fe.Errors.INVALID_LOC();f.version=d.readUInt16LE(C.LOCVER),f.flags=d.readUInt16LE(C.LOCFLG),f.method=d.readUInt16LE(C.LOCHOW),f.time=d.readUInt32LE(C.LOCTIM),f.crc=d.readUInt32LE(C.LOCCRC),f.compressedSize=d.readUInt32LE(C.LOCSIZ),f.size=d.readUInt32LE(C.LOCLEN),f.fnameLen=d.readUInt16LE(C.LOCNAM),f.extraLen=d.readUInt16LE(C.LOCEXT);const g=h+C.LOCHDR+f.fnameLen,b=g+f.extraLen;return l.slice(g,b)},loadFromBinary:function(l){if(l.length!==C.CENHDR||l.readUInt32LE(0)!==C.CENSIG)throw fe.Errors.INVALID_CEN();t=l.readUInt16LE(C.CENVEM),e=l.readUInt16LE(C.CENVER),r=l.readUInt16LE(C.CENFLG),i=l.readUInt16LE(C.CENHOW),s=l.readUInt32LE(C.CENTIM),n=l.readUInt32LE(C.CENCRC),o=l.readUInt32LE(C.CENSIZ),u=l.readUInt32LE(C.CENLEN),m=l.readUInt16LE(C.CENNAM),c=l.readUInt16LE(C.CENEXT),E=l.readUInt16LE(C.CENCOM),y=l.readUInt16LE(C.CENDSK),w=l.readUInt16LE(C.CENATT),a=l.readUInt32LE(C.CENATX),h=l.readUInt32LE(C.CENOFF)},localHeaderToBinary:function(){var l=Buffer.alloc(C.LOCHDR);return l.writeUInt32LE(C.LOCSIG,0),l.writeUInt16LE(e,C.LOCVER),l.writeUInt16LE(r,C.LOCFLG),l.writeUInt16LE(i,C.LOCHOW),l.writeUInt32LE(s,C.LOCTIM),l.writeUInt32LE(n,C.LOCCRC),l.writeUInt32LE(o,C.LOCSIZ),l.writeUInt32LE(u,C.LOCLEN),l.writeUInt16LE(m,C.LOCNAM),l.writeUInt16LE(f.extraLen,C.LOCEXT),l},centralHeaderToBinary:function(){var l=Buffer.alloc(C.CENHDR+m+c+E);return l.writeUInt32LE(C.CENSIG,0),l.writeUInt16LE(t,C.CENVEM),l.writeUInt16LE(e,C.CENVER),l.writeUInt16LE(r,C.CENFLG),l.writeUInt16LE(i,C.CENHOW),l.writeUInt32LE(s,C.CENTIM),l.writeUInt32LE(n,C.CENCRC),l.writeUInt32LE(o,C.CENSIZ),l.writeUInt32LE(u,C.CENLEN),l.writeUInt16LE(m,C.CENNAM),l.writeUInt16LE(c,C.CENEXT),l.writeUInt16LE(E,C.CENCOM),l.writeUInt16LE(y,C.CENDSK),l.writeUInt16LE(w,C.CENATT),l.writeUInt32LE(a,C.CENATX),l.writeUInt32LE(h,C.CENOFF),l},toJSON:function(){const l=function(d){return d+" bytes"};return{made:t,version:e,flags:r,method:fe.methodToString(i),time:this.time,crc:"0x"+n.toString(16).toUpperCase(),compressedSize:l(o),size:l(u),fileNameLength:l(m),extraLength:l(c),commentLength:l(E),diskNumStart:y,inAttr:w,attr:a,offset:h,centralHeaderSize:l(C.CENHDR+m+c+E)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}},Ie=He,k=Ie.Constants,Jc=function(){var t=0,e=0,r=0,i=0,s=0;return{get diskEntries(){return t},set diskEntries(n){t=e=n},get totalEntries(){return e},set totalEntries(n){e=t=n},get size(){return r},set size(n){r=n},get offset(){return i},set offset(n){i=n},get commentLength(){return s},set commentLength(n){s=n},get mainHeaderSize(){return k.ENDHDR+s},loadFromBinary:function(n){if((n.length!==k.ENDHDR||n.readUInt32LE(0)!==k.ENDSIG)&&(n.length<k.ZIP64HDR||n.readUInt32LE(0)!==k.ZIP64SIG))throw Ie.Errors.INVALID_END();n.readUInt32LE(0)===k.ENDSIG?(t=n.readUInt16LE(k.ENDSUB),e=n.readUInt16LE(k.ENDTOT),r=n.readUInt32LE(k.ENDSIZ),i=n.readUInt32LE(k.ENDOFF),s=n.readUInt16LE(k.ENDCOM)):(t=Ie.readBigUInt64LE(n,k.ZIP64SUB),e=Ie.readBigUInt64LE(n,k.ZIP64TOT),r=Ie.readBigUInt64LE(n,k.ZIP64SIZE),i=Ie.readBigUInt64LE(n,k.ZIP64OFF),s=0)},toBinary:function(){var n=Buffer.alloc(k.ENDHDR+s);return n.writeUInt32LE(k.ENDSIG,0),n.writeUInt32LE(0,4),n.writeUInt16LE(t,k.ENDSUB),n.writeUInt16LE(e,k.ENDTOT),n.writeUInt32LE(r,k.ENDSIZ),n.writeUInt32LE(i,k.ENDOFF),n.writeUInt16LE(s,k.ENDCOM),n.fill(" ",k.ENDHDR),n},toJSON:function(){const n=function(o,u){let m=o.toString(16).toUpperCase();for(;m.length<u;)m="0"+m;return"0x"+m};return{diskEntries:t,totalEntries:e,size:r+" bytes",offset:n(i,4),commentLength:s}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}};ht.EntryHeader=Xc,ht.MainHeader=Jc;var ut={},Qc=function(t){var e=yr,r={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,r)},deflateAsync:function(i){var s=e.createDeflateRaw(r),n=[],o=0;s.on("data",function(u){n.push(u),o+=u.length}),s.on("end",function(){var u=Buffer.alloc(o),m=0;u.fill(0);for(var c=0;c<n.length;c++){var E=n[c];E.copy(u,m),m+=E.length}i&&i(u)}),s.end(t)}}};const el=+(process.versions?process.versions.node:"").split(".")[0]||0;var tl=function(t,e){var r=yr;const i=el>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return r.inflateRawSync(t,i)},inflateAsync:function(s){var n=r.createInflateRaw(i),o=[],u=0;n.on("data",function(m){o.push(m),u+=m.length}),n.on("end",function(){var m=Buffer.alloc(u),c=0;m.fill(0);for(var E=0;E<o.length;E++){var y=o[E];y.copy(m,c),c+=y.length}s&&s(m)}),n.end(t)}}};const{randomFillSync:as}=vt,rl=lt,il=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)e&1?e=e>>>1^3988292384:e>>>=1;return e>>>0}),cs=(t,e)=>Math.imul(t,e)>>>0,ls=(t,e)=>il[(t^e)&255]^t>>>8,je=()=>typeof as=="function"?as(Buffer.alloc(12)):je.node();je.node=()=>{const t=Buffer.alloc(12),e=t.length;for(let r=0;r<e;r++)t[r]=Math.random()*256&255;return t};const ft={genSalt:je};function dt(t){const e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let r=0;r<e.length;r++)this.updateKeys(e[r])}dt.prototype.updateKeys=function(t){const e=this.keys;return e[0]=ls(e[0],t),e[1]+=e[0]&255,e[1]=cs(e[1],134775813)+1,e[2]=ls(e[2],e[1]>>>24),t},dt.prototype.next=function(){const t=(this.keys[2]|2)>>>0;return cs(t,t^1)>>8&255};function sl(t){const e=new dt(t);return function(r){const i=Buffer.alloc(r.length);let s=0;for(let n of r)i[s++]=e.updateKeys(n^e.next());return i}}function nl(t){const e=new dt(t);return function(r,i,s=0){i||(i=Buffer.alloc(r.length));for(let n of r){const o=e.next();i[s++]=n^o,e.updateKeys(n)}return i}}function ol(t,e,r){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);const i=sl(r),s=i(t.slice(0,12)),n=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(s[11]!==n)throw rl.WRONG_PASSWORD();return i(t.slice(12))}function al(t){Buffer.isBuffer(t)&&t.length>=12?ft.genSalt=function(){return t.slice(0,12)}:t==="node"?ft.genSalt=je.node:ft.genSalt=je}function cl(t,e,r,i=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));const s=nl(r),n=ft.genSalt();n[11]=e.crc>>>24&255,i&&(n[10]=e.crc>>>16&255);const o=Buffer.alloc(t.length+12);return s(n,o),s(t,o,12)}var ll={decrypt:ol,encrypt:cl,_salter:al};ut.Deflater=Qc,ut.Inflater=tl,ut.ZipCrypto=ll;var R=He,hl=ht,M=R.Constants,Jt=ut,hs=function(t,e){var r=new hl.EntryHeader,i=Buffer.alloc(0),s=Buffer.alloc(0),n=!1,o=null,u=Buffer.alloc(0),m=Buffer.alloc(0),c=!0;const E=t,y=typeof E.decoder=="object"?E.decoder:R.decoder;c=y.hasOwnProperty("efs")?y.efs:!1;function w(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(m=r.loadLocalHeaderFromBinary(e),e.slice(r.realDataOffset,r.realDataOffset+r.compressedSize))}function a(d){if(r.flags_desc){const g={},b=r.realDataOffset+r.compressedSize;if(e.readUInt32LE(b)==M.LOCSIG||e.readUInt32LE(b)==M.CENSIG)throw R.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(b)==M.EXTSIG)g.crc=e.readUInt32LE(b+M.EXTCRC),g.compressedSize=e.readUInt32LE(b+M.EXTSIZ),g.size=e.readUInt32LE(b+M.EXTLEN);else if(e.readUInt16LE(b+12)===19280)g.crc=e.readUInt32LE(b+M.EXTCRC-4),g.compressedSize=e.readUInt32LE(b+M.EXTSIZ-4),g.size=e.readUInt32LE(b+M.EXTLEN-4);else throw R.Errors.DESCRIPTOR_UNKNOWN();if(g.compressedSize!==r.compressedSize||g.size!==r.size||g.crc!==r.crc)throw R.Errors.DESCRIPTOR_FAULTY();if(R.crc32(d)!==g.crc)return!1}else if(R.crc32(d)!==r.localHeader.crc)return!1;return!0}function h(d,g,b){if(typeof g>"u"&&typeof d=="string"&&(b=d,d=void 0),n)return d&&g&&g(Buffer.alloc(0),R.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var _=w();if(_.length===0)return d&&g&&g(_),_;if(r.encrypted){if(typeof b!="string"&&!Buffer.isBuffer(b))throw R.Errors.INVALID_PASS_PARAM();_=Jt.ZipCrypto.decrypt(_,r,b)}var S=Buffer.alloc(r.size);switch(r.method){case R.Constants.STORED:if(_.copy(S),a(S))return d&&g&&g(S),S;throw d&&g&&g(S,R.Errors.BAD_CRC()),R.Errors.BAD_CRC();case R.Constants.DEFLATED:var L=new Jt.Inflater(_,r.size);if(d)L.inflateAsync(function(O){O.copy(O,0),g&&(a(O)?g(O):g(O,R.Errors.BAD_CRC()))});else{if(L.inflate(S).copy(S,0),!a(S))throw R.Errors.BAD_CRC(`"${y.decode(i)}"`);return S}break;default:throw d&&g&&g(Buffer.alloc(0),R.Errors.UNKNOWN_METHOD()),R.Errors.UNKNOWN_METHOD()}}function f(d,g){if((!o||!o.length)&&Buffer.isBuffer(e))return d&&g&&g(w()),w();if(o.length&&!n){var b;switch(r.method){case R.Constants.STORED:return r.compressedSize=r.size,b=Buffer.alloc(o.length),o.copy(b),d&&g&&g(b),b;default:case R.Constants.DEFLATED:var _=new Jt.Deflater(o);if(d)_.deflateAsync(function(L){b=Buffer.alloc(L.length),r.compressedSize=L.length,L.copy(b),g&&g(b)});else{var S=_.deflate();return r.compressedSize=S.length,S}_=null;break}}else if(d&&g)g(Buffer.alloc(0));else return Buffer.alloc(0)}function p(d,g){return(d.readUInt32LE(g+4)<<4)+d.readUInt32LE(g)}function v(d){try{for(var g=0,b,_,S;g+4<d.length;)b=d.readUInt16LE(g),g+=2,_=d.readUInt16LE(g),g+=2,S=d.slice(g,g+_),g+=_,M.ID_ZIP64===b&&l(S)}catch{throw R.Errors.EXTRA_FIELD_PARSE_ERROR()}}function l(d){var g,b,_,S;d.length>=M.EF_ZIP64_SCOMP&&(g=p(d,M.EF_ZIP64_SUNCOMP),r.size===M.EF_ZIP64_OR_32&&(r.size=g)),d.length>=M.EF_ZIP64_RHO&&(b=p(d,M.EF_ZIP64_SCOMP),r.compressedSize===M.EF_ZIP64_OR_32&&(r.compressedSize=b)),d.length>=M.EF_ZIP64_DSN&&(_=p(d,M.EF_ZIP64_RHO),r.offset===M.EF_ZIP64_OR_32&&(r.offset=_)),d.length>=M.EF_ZIP64_DSN+4&&(S=d.readUInt32LE(M.EF_ZIP64_DSN),r.diskNumStart===M.EF_ZIP64_OR_16&&(r.diskNumStart=S))}return{get entryName(){return y.decode(i)},get rawEntryName(){return i},set entryName(d){i=R.toBuffer(d,y.encode);var g=i[i.length-1];n=g===47||g===92,r.fileNameLength=i.length},get efs(){return typeof c=="function"?c(this.entryName):c},get extra(){return u},set extra(d){u=d,r.extraLength=d.length,v(d)},get comment(){return y.decode(s)},set comment(d){if(s=R.toBuffer(d,y.encode),r.commentLength=s.length,s.length>65535)throw R.Errors.COMMENT_TOO_LONG()},get name(){var d=y.decode(i);return n?d.substr(d.length-1).split("/").pop():d.split("/").pop()},get isDirectory(){return n},getCompressedData:function(){return f(!1,null)},getCompressedDataAsync:function(d){f(!0,d)},setData:function(d){o=R.toBuffer(d,R.decoder.encode),!n&&o.length?(r.size=o.length,r.method=R.Constants.DEFLATED,r.crc=R.crc32(d),r.changed=!0):r.method=R.Constants.STORED},getData:function(d){return r.changed?o:h(!1,null,d)},getDataAsync:function(d,g){r.changed?d(o):h(!0,d,g)},set attr(d){r.attr=d},get attr(){return r.attr},set header(d){r.loadFromBinary(d)},get header(){return r},packCentralHeader:function(){r.flags_efs=this.efs,r.extraLength=u.length;var d=r.centralHeaderToBinary(),g=R.Constants.CENHDR;return i.copy(d,g),g+=i.length,u.copy(d,g),g+=r.extraLength,s.copy(d,g),d},packLocalHeader:function(){let d=0;r.flags_efs=this.efs,r.extraLocalLength=m.length;const g=r.localHeaderToBinary(),b=Buffer.alloc(g.length+i.length+r.extraLocalLength);return g.copy(b,d),d+=g.length,i.copy(b,d),d+=i.length,m.copy(b,d),d+=m.length,b},toJSON:function(){const d=function(g){return"<"+(g&&g.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:r.toJSON(),compressedData:d(e),data:d(o)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}};const us=hs,ul=ht,q=He;var fl=function(t,e){var r=[],i={},s=Buffer.alloc(0),n=new ul.MainHeader,o=!1;const u=new Set,m=e,{noSort:c,decoder:E}=m;t?a(m.readEntries):o=!0;function y(){const f=new Set;for(const p of Object.keys(i)){const v=p.split("/");if(v.pop(),!!v.length)for(let l=0;l<v.length;l++){const d=v.slice(0,l+1).join("/")+"/";f.add(d)}}for(const p of f)if(!(p in i)){const v=new us(m);v.entryName=p,v.attr=16,v.temporary=!0,r.push(v),i[v.entryName]=v,u.add(v)}}function w(){if(o=!0,i={},n.diskEntries>(t.length-n.offset)/q.Constants.CENHDR)throw q.Errors.DISK_ENTRY_TOO_LARGE();r=new Array(n.diskEntries);for(var f=n.offset,p=0;p<r.length;p++){var v=f,l=new us(m,t);l.header=t.slice(v,v+=q.Constants.CENHDR),l.entryName=t.slice(v,v+=l.header.fileNameLength),l.header.extraLength&&(l.extra=t.slice(v,v+=l.header.extraLength)),l.header.commentLength&&(l.comment=t.slice(v,v+l.header.commentLength)),f+=l.header.centralHeaderSize,r[p]=l,i[l.entryName]=l}u.clear(),y()}function a(f){var p=t.length-q.Constants.ENDHDR,v=Math.max(0,p-65535),l=v,d=t.length,g=-1,b=0;for((typeof m.trailingSpace=="boolean"?m.trailingSpace:!1)&&(v=0),p;p>=l;p--)if(t[p]===80){if(t.readUInt32LE(p)===q.Constants.ENDSIG){g=p,b=p,d=p+q.Constants.ENDHDR,l=p-q.Constants.END64HDR;continue}if(t.readUInt32LE(p)===q.Constants.END64SIG){l=v;continue}if(t.readUInt32LE(p)===q.Constants.ZIP64SIG){g=p,d=p+q.readBigUInt64LE(t,p+q.Constants.ZIP64SIZE)+q.Constants.ZIP64LEAD;break}}if(g==-1)throw q.Errors.INVALID_FORMAT();n.loadFromBinary(t.slice(g,d)),n.commentLength&&(s=t.slice(b+q.Constants.ENDHDR)),f&&w()}function h(){r.length>1&&!c&&r.sort((f,p)=>f.entryName.toLowerCase().localeCompare(p.entryName.toLowerCase()))}return{get entries(){return o||w(),r.filter(f=>!u.has(f))},get comment(){return E.decode(s)},set comment(f){s=q.toBuffer(f,E.encode),n.commentLength=s.length},getEntryCount:function(){return o?r.length:n.diskEntries},forEach:function(f){this.entries.forEach(f)},getEntry:function(f){return o||w(),i[f]||null},setEntry:function(f){o||w(),r.push(f),i[f.entryName]=f,n.totalEntries=r.length},deleteFile:function(f,p=!0){o||w();const v=i[f];this.getEntryChildren(v,p).map(d=>d.entryName).forEach(this.deleteEntry)},deleteEntry:function(f){o||w();const p=i[f],v=r.indexOf(p);v>=0&&(r.splice(v,1),delete i[f],n.totalEntries=r.length)},getEntryChildren:function(f,p=!0){if(o||w(),typeof f=="object")if(f.isDirectory&&p){const v=[],l=f.entryName;for(const d of r)d.entryName.startsWith(l)&&v.push(d);return v}else return[f];return[]},getChildCount:function(f){if(f&&f.isDirectory){const p=this.getEntryChildren(f);return p.includes(f)?p.length-1:p.length}return 0},compressToBuffer:function(){o||w(),h();const f=[],p=[];let v=0,l=0;n.size=0,n.offset=0;let d=0;for(const _ of this.entries){const S=_.getCompressedData();_.header.offset=l;const L=_.packLocalHeader(),O=L.length+S.length;l+=O,f.push(L),f.push(S);const A=_.packCentralHeader();p.push(A),n.size+=A.length,v+=O+A.length,d++}v+=n.mainHeaderSize,n.offset=l,n.totalEntries=d,l=0;const g=Buffer.alloc(v);for(const _ of f)_.copy(g,l),l+=_.length;for(const _ of p)_.copy(g,l),l+=_.length;const b=n.toBinary();return s&&s.copy(b,q.Constants.ENDHDR),b.copy(g,l),t=g,o=!1,g},toAsyncBuffer:function(f,p,v,l){try{o||w(),h();const d=[],g=[];let b=0,_=0,S=0;n.size=0,n.offset=0;const L=function(O){if(O.length>0){const A=O.shift(),I=A.entryName+A.extra.toString();v&&v(I),A.getCompressedDataAsync(function(D){l&&l(I),A.header.offset=_;const T=A.packLocalHeader(),H=T.length+D.length;_+=H,d.push(T),d.push(D);const K=A.packCentralHeader();g.push(K),n.size+=K.length,b+=H+K.length,S++,L(O)})}else{b+=n.mainHeaderSize,n.offset=_,n.totalEntries=S,_=0;const A=Buffer.alloc(b);d.forEach(function(D){D.copy(A,_),_+=D.length}),g.forEach(function(D){D.copy(A,_),_+=D.length});const I=n.toBinary();s&&s.copy(I,q.Constants.ENDHDR),I.copy(A,_),t=A,o=!1,f(A)}};L(Array.from(this.entries))}catch(d){p(d)}}}};const P=He,U=de,dl=hs,pl=fl,be=(...t)=>P.findLast(t,e=>typeof e=="boolean"),fs=(...t)=>P.findLast(t,e=>typeof e=="string"),ml=(...t)=>P.findLast(t,e=>typeof e=="function"),gl={noSort:!1,readEntries:!1,method:P.Constants.NONE,fs:null};var vl=function(t,e){let r=null;const i=Object.assign(Object.create(null),gl);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(i,t),t=i.input?i.input:void 0,i.input&&delete i.input),Buffer.isBuffer(t)&&(r=t,i.method=P.Constants.BUFFER,t=void 0)),Object.assign(i,e);const s=new P(i);if((typeof i.decoder!="object"||typeof i.decoder.encode!="function"||typeof i.decoder.decode!="function")&&(i.decoder=P.decoder),t&&typeof t=="string")if(s.fs.existsSync(t))i.method=P.Constants.FILE,i.filename=t,r=s.fs.readFileSync(t);else throw P.Errors.INVALID_FILENAME();const n=new pl(r,i),{canonical:o,sanitize:u,zipnamefix:m}=P;function c(a){if(a&&n){var h;if(typeof a=="string"&&(h=n.getEntry(U.posix.normalize(a))),typeof a=="object"&&typeof a.entryName<"u"&&typeof a.header<"u"&&(h=n.getEntry(a.entryName)),h)return h}return null}function E(a){const{join:h,normalize:f,sep:p}=U.posix;return h(".",f(p+a.split("\\").join(p)+p))}function y(a){return a instanceof RegExp?function(h){return function(f){return h.test(f)}}(a):typeof a!="function"?()=>!0:a}const w=(a,h)=>{let f=h.slice(-1);return f=f===s.sep?s.sep:"",U.relative(a,h)+f};return{readFile:function(a,h){var f=c(a);return f&&f.getData(h)||null},childCount:function(a){const h=c(a);if(h)return n.getChildCount(h)},readFileAsync:function(a,h){var f=c(a);f?f.getDataAsync(h):h(null,"getEntry failed for:"+a)},readAsText:function(a,h){var f=c(a);if(f){var p=f.getData();if(p&&p.length)return p.toString(h||"utf8")}return""},readAsTextAsync:function(a,h,f){var p=c(a);p?p.getDataAsync(function(v,l){if(l){h(v,l);return}v&&v.length?h(v.toString(f||"utf8")):h("")}):h("")},deleteFile:function(a,h=!0){var f=c(a);f&&n.deleteFile(f.entryName,h)},deleteEntry:function(a){var h=c(a);h&&n.deleteEntry(h.entryName)},addZipComment:function(a){n.comment=a},getZipComment:function(){return n.comment||""},addZipEntryComment:function(a,h){var f=c(a);f&&(f.comment=h)},getZipEntryComment:function(a){var h=c(a);return h&&h.comment||""},updateFile:function(a,h){var f=c(a);f&&f.setData(h)},addLocalFile:function(a,h,f,p){if(s.fs.existsSync(a)){h=h?E(h):"";const v=U.win32.basename(U.win32.normalize(a));h+=f||v;const l=s.fs.statSync(a),d=l.isFile()?s.fs.readFileSync(a):Buffer.alloc(0);l.isDirectory()&&(h+=s.sep),this.addFile(h,d,p,l)}else throw P.Errors.FILE_NOT_FOUND(a)},addLocalFileAsync:function(a,h){a=typeof a=="object"?a:{localPath:a};const f=U.resolve(a.localPath),{comment:p}=a;let{zipPath:v,zipName:l}=a;const d=this;s.fs.stat(f,function(g,b){if(g)return h(g,!1);v=v?E(v):"";const _=U.win32.basename(U.win32.normalize(f));if(v+=l||_,b.isFile())s.fs.readFile(f,function(S,L){return S?h(S,!1):(d.addFile(v,L,p,b),setImmediate(h,void 0,!0))});else if(b.isDirectory())return v+=s.sep,d.addFile(v,Buffer.alloc(0),p,b),setImmediate(h,void 0,!0)})},addLocalFolder:function(a,h,f){if(f=y(f),h=h?E(h):"",a=U.normalize(a),s.fs.existsSync(a)){const p=s.findFiles(a),v=this;if(p.length)for(const l of p){const d=U.join(h,w(a,l));f(d)&&v.addLocalFile(l,U.dirname(d))}}else throw P.Errors.FILE_NOT_FOUND(a)},addLocalFolderAsync:function(a,h,f,p){p=y(p),f=f?E(f):"",a=U.normalize(a);var v=this;s.fs.open(a,"r",function(l){if(l&&l.code==="ENOENT")h(void 0,P.Errors.FILE_NOT_FOUND(a));else if(l)h(void 0,l);else{var d=s.findFiles(a),g=-1,b=function(){if(g+=1,g<d.length){var _=d[g],S=w(a,_).split("\\").join("/");S=S.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),p(S)?s.fs.stat(_,function(L,O){L&&h(void 0,L),O.isFile()?s.fs.readFile(_,function(A,I){A?h(void 0,A):(v.addFile(f+S,I,"",O),b())}):(v.addFile(f+S+"/",Buffer.alloc(0),"",O),b())}):process.nextTick(()=>{b()})}else h(!0,void 0)};b()}})},addLocalFolderAsync2:function(a,h){const f=this;a=typeof a=="object"?a:{localPath:a},localPath=U.resolve(E(a.localPath));let{zipPath:p,filter:v,namefix:l}=a;v instanceof RegExp?v=function(b){return function(_){return b.test(_)}}(v):typeof v!="function"&&(v=function(){return!0}),p=p?E(p):"",l=="latin1"&&(l=b=>b.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof l!="function"&&(l=b=>b);const d=b=>U.join(p,l(w(localPath,b))),g=b=>U.win32.basename(U.win32.normalize(l(b)));s.fs.open(localPath,"r",function(b){b&&b.code==="ENOENT"?h(void 0,P.Errors.FILE_NOT_FOUND(localPath)):b?h(void 0,b):s.findFilesAsync(localPath,function(_,S){if(_)return h(_);S=S.filter(L=>v(d(L))),S.length||h(void 0,!1),setImmediate(S.reverse().reduce(function(L,O){return function(A,I){if(A||I===!1)return setImmediate(L,A,!1);f.addLocalFileAsync({localPath:O,zipPath:U.dirname(d(O)),zipName:g(O)},L)}},h))})})},addLocalFolderPromise:function(a,h){return new Promise((f,p)=>{this.addLocalFolderAsync2(Object.assign({localPath:a},h),(v,l)=>{v&&p(v),l&&f(this)})})},addFile:function(a,h,f,p){a=m(a);let v=c(a);const l=v!=null;l||(v=new dl(i),v.entryName=a),v.comment=f||"";const d=typeof p=="object"&&p instanceof s.fs.Stats;d&&(v.header.time=p.mtime);var g=v.isDirectory?16:0;let b=v.isDirectory?16384:32768;return d?b|=4095&p.mode:typeof p=="number"?b|=4095&p:b|=v.isDirectory?493:420,g=(g|b<<16)>>>0,v.attr=g,v.setData(h),l||n.setEntry(v),v},getEntries:function(a){return n.password=a,n?n.entries:[]},getEntry:function(a){return c(a)},getEntryCount:function(){return n.getEntryCount()},forEach:function(a){return n.forEach(a)},extractEntryTo:function(a,h,f,p,v,l){p=be(!1,p),v=be(!1,v),f=be(!0,f),l=fs(v,l);var d=c(a);if(!d)throw P.Errors.NO_ENTRY();var g=o(d.entryName),b=u(h,l&&!d.isDirectory?l:f?g:U.basename(g));if(d.isDirectory){var _=n.getEntryChildren(d);return _.forEach(function(O){if(O.isDirectory)return;var A=O.getData();if(!A)throw P.Errors.CANT_EXTRACT_FILE();var I=o(O.entryName),D=u(h,f?I:U.basename(I));const T=v?O.header.fileAttr:void 0;s.writeFileTo(D,A,p,T)}),!0}var S=d.getData(n.password);if(!S)throw P.Errors.CANT_EXTRACT_FILE();if(s.fs.existsSync(b)&&!p)throw P.Errors.CANT_OVERRIDE();const L=v?a.header.fileAttr:void 0;return s.writeFileTo(b,S,p,L),!0},test:function(a){if(!n)return!1;for(var h in n.entries)try{if(h.isDirectory)continue;var f=n.entries[h].getData(a);if(!f)return!1}catch{return!1}return!0},extractAllTo:function(a,h,f,p){if(f=be(!1,f),p=fs(f,p),h=be(!1,h),!n)throw P.Errors.NO_ZIP();n.entries.forEach(function(v){var l=u(a,o(v.entryName));if(v.isDirectory){s.makeDir(l);return}var d=v.getData(p);if(!d)throw P.Errors.CANT_EXTRACT_FILE();const g=f?v.header.fileAttr:void 0;s.writeFileTo(l,d,h,g);try{s.fs.utimesSync(l,v.header.time,v.header.time)}catch{throw P.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(a,h,f,p){if(p=ml(h,f,p),f=be(!1,f),h=be(!1,h),!p)return new Promise((b,_)=>{this.extractAllToAsync(a,h,f,function(S){S?_(S):b(this)})});if(!n){p(P.Errors.NO_ZIP());return}a=U.resolve(a);const v=b=>u(a,U.normalize(o(b.entryName))),l=(b,_)=>new Error(b+': "'+_+'"'),d=[],g=[];n.entries.forEach(b=>{b.isDirectory?d.push(b):g.push(b)});for(const b of d){const _=v(b),S=f?b.header.fileAttr:void 0;try{s.makeDir(_),S&&s.fs.chmodSync(_,S),s.fs.utimesSync(_,b.header.time,b.header.time)}catch{p(l("Unable to create folder",_))}}g.reverse().reduce(function(b,_){return function(S){if(S)b(S);else{const L=U.normalize(o(_.entryName)),O=u(a,L);_.getDataAsync(function(A,I){if(I)b(I);else if(!A)b(P.Errors.CANT_EXTRACT_FILE());else{const D=f?_.header.fileAttr:void 0;s.writeFileToAsync(O,A,h,D,function(T){T||b(l("Unable to write file",O)),s.fs.utimes(O,_.header.time,_.header.time,function(H){H?b(l("Unable to set times",O)):b()})})}})}}},p)()},writeZip:function(a,h){if(arguments.length===1&&typeof a=="function"&&(h=a,a=""),!a&&i.filename&&(a=i.filename),!!a){var f=n.compressToBuffer();if(f){var p=s.writeFileTo(a,f,!0);typeof h=="function"&&h(p?null:new Error("failed"),"")}}},writeZipPromise:function(a,h){const{overwrite:f,perm:p}=Object.assign({overwrite:!0},h);return new Promise((v,l)=>{!a&&i.filename&&(a=i.filename),a||l("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(d=>{const g=b=>b?v(b):l("ADM-ZIP: Wasn't able to write zip file");s.writeFileToAsync(a,d,f,p,g)},l)})},toBufferPromise:function(){return new Promise((a,h)=>{n.toAsyncBuffer(a,h)})},toBuffer:function(a,h,f,p){return typeof a=="function"?(n.toAsyncBuffer(a,h,f,p),null):n.compressToBuffer()}}};const El=Se(vl);var Oe={exports:{}},Qt,ds;function yl(){if(ds)return Qt;ds=1,Qt=i,i.sync=s;var t=we;function e(n,o){var u=o.pathExt!==void 0?o.pathExt:process.env.PATHEXT;if(!u||(u=u.split(";"),u.indexOf("")!==-1))return!0;for(var m=0;m<u.length;m++){var c=u[m].toLowerCase();if(c&&n.substr(-c.length).toLowerCase()===c)return!0}return!1}function r(n,o,u){return!n.isSymbolicLink()&&!n.isFile()?!1:e(o,u)}function i(n,o,u){t.stat(n,function(m,c){u(m,m?!1:r(c,n,o))})}function s(n,o){return r(t.statSync(n),n,o)}return Qt}var er,ps;function bl(){if(ps)return er;ps=1,er=e,e.sync=r;var t=we;function e(n,o,u){t.stat(n,function(m,c){u(m,m?!1:i(c,o))})}function r(n,o){return i(t.statSync(n),o)}function i(n,o){return n.isFile()&&s(n,o)}function s(n,o){var u=n.mode,m=n.uid,c=n.gid,E=o.uid!==void 0?o.uid:process.getuid&&process.getuid(),y=o.gid!==void 0?o.gid:process.getgid&&process.getgid(),w=parseInt("100",8),a=parseInt("010",8),h=parseInt("001",8),f=w|a,p=u&h||u&a&&c===y||u&w&&m===E||u&f&&E===0;return p}return er}var pt;process.platform==="win32"||De.TESTING_WINDOWS?pt=yl():pt=bl();var wl=tr;tr.sync=Sl;function tr(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,s){tr(t,e||{},function(n,o){n?s(n):i(o)})})}pt(t,e||{},function(i,s){i&&(i.code==="EACCES"||e&&e.ignoreErrors)&&(i=null,s=!1),r(i,s)})}function Sl(t,e){try{return pt.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}const Ae=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ms=de,_l=Ae?";":":",gs=wl,vs=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),Es=(t,e)=>{const r=e.colon||_l,i=t.match(/\//)||Ae&&t.match(/\\/)?[""]:[...Ae?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],s=Ae?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",n=Ae?s.split(r):[""];return Ae&&t.indexOf(".")!==-1&&n[0]!==""&&n.unshift(""),{pathEnv:i,pathExt:n,pathExtExe:s}},ys=(t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});const{pathEnv:i,pathExt:s,pathExtExe:n}=Es(t,e),o=[],u=c=>new Promise((E,y)=>{if(c===i.length)return e.all&&o.length?E(o):y(vs(t));const w=i[c],a=/^".*"$/.test(w)?w.slice(1,-1):w,h=ms.join(a,t),f=!a&&/^\.[\\\/]/.test(t)?t.slice(0,2)+h:h;E(m(f,c,0))}),m=(c,E,y)=>new Promise((w,a)=>{if(y===s.length)return w(u(E+1));const h=s[y];gs(c+h,{pathExt:n},(f,p)=>{if(!f&&p)if(e.all)o.push(c+h);else return w(c+h);return w(m(c,E,y+1))})});return r?u(0).then(c=>r(null,c),r):u(0)},Cl=(t,e)=>{e=e||{};const{pathEnv:r,pathExt:i,pathExtExe:s}=Es(t,e),n=[];for(let o=0;o<r.length;o++){const u=r[o],m=/^".*"$/.test(u)?u.slice(1,-1):u,c=ms.join(m,t),E=!m&&/^\.[\\\/]/.test(t)?t.slice(0,2)+c:c;for(let y=0;y<i.length;y++){const w=E+i[y];try{if(gs.sync(w,{pathExt:s}))if(e.all)n.push(w);else return w}catch{}}}if(e.all&&n.length)return n;if(e.nothrow)return null;throw vs(t)};var xl=ys;ys.sync=Cl;var rr={exports:{}};const bs=(t={})=>{const e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};rr.exports=bs,rr.exports.default=bs;var Il=rr.exports;const ws=de,Ol=xl,Al=Il;function Ss(t,e){const r=t.options.env||process.env,i=process.cwd(),s=t.options.cwd!=null,n=s&&process.chdir!==void 0&&!process.chdir.disabled;if(n)try{process.chdir(t.options.cwd)}catch{}let o;try{o=Ol.sync(t.command,{path:r[Al({env:r})],pathExt:e?ws.delimiter:void 0})}catch{}finally{n&&process.chdir(i)}return o&&(o=ws.resolve(s?t.options.cwd:"",o)),o}function Tl(t){return Ss(t)||Ss(t,!0)}var Dl=Tl,ir={};const sr=/([()\][%!^"`<>&|;, *?])/g;function Ll(t){return t=t.replace(sr,"^$1"),t}function Nl(t,e){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(sr,"^$1"),e&&(t=t.replace(sr,"^$1")),t}ir.command=Ll,ir.argument=Nl;var Rl=/^#!(.*)/;const Fl=Rl;var $l=(t="")=>{const e=t.match(Fl);if(!e)return null;const[r,i]=e[0].replace(/#! ?/,"").split(" "),s=r.split("/").pop();return s==="env"?i:i?`${s} ${i}`:s};const nr=we,kl=$l;function Pl(t){const r=Buffer.alloc(150);let i;try{i=nr.openSync(t,"r"),nr.readSync(i,r,0,150,0),nr.closeSync(i)}catch{}return kl(r.toString())}var Bl=Pl;const Ml=de,_s=Dl,Cs=ir,Ul=Bl,Hl=process.platform==="win32",jl=/\.(?:com|exe)$/i,Gl=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function ql(t){t.file=_s(t);const e=t.file&&Ul(t.file);return e?(t.args.unshift(t.file),t.command=e,_s(t)):t.file}function Wl(t){if(!Hl)return t;const e=ql(t),r=!jl.test(e);if(t.options.forceShell||r){const i=Gl.test(e);t.command=Ml.normalize(t.command),t.command=Cs.command(t.command),t.args=t.args.map(n=>Cs.argument(n,i));const s=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${s}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function Zl(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);const i={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?i:Wl(i)}var zl=Zl;const or=process.platform==="win32";function ar(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function Vl(t,e){if(!or)return;const r=t.emit;t.emit=function(i,s){if(i==="exit"){const n=xs(s,e);if(n)return r.call(t,"error",n)}return r.apply(t,arguments)}}function xs(t,e){return or&&t===1&&!e.file?ar(e.original,"spawn"):null}function Kl(t,e){return or&&t===1&&!e.file?ar(e.original,"spawnSync"):null}var Yl={hookChildProcess:Vl,verifyENOENT:xs,verifyENOENTSync:Kl,notFoundError:ar};const Is=Us,cr=zl,lr=Yl;function Os(t,e,r){const i=cr(t,e,r),s=Is.spawn(i.command,i.args,i.options);return lr.hookChildProcess(s,i),s}function Xl(t,e,r){const i=cr(t,e,r),s=Is.spawnSync(i.command,i.args,i.options);return s.error=s.error||lr.verifyENOENTSync(s.status,i),s}Oe.exports=Os,Oe.exports.spawn=Os,Oe.exports.sync=Xl,Oe.exports._parse=cr,Oe.exports._enoent=lr;var Jl=Oe.exports;const Ql=Se(Jl),{gray:eh,cyan:mt}=Ws,As=new class{async start(){const t=ue.cmdArgv;ue.setTemplate(t.template),ue.setInput(t.input);const e=ue.template;if(!ue.isSupportTemplate(e))throw new Error(`Not support "${e}".`);const r=ue.getInput(),i=Hc(e,r),s=Ql.sync(`vite build -c ${i}`,[],{});if(s.stderr.byteLength)throw new Error(s.stderr.toString());const n=JSON.parse(s.stdout.toString()),o=new El,u=`/${Pc()}/`,m=n.filter(E=>E.includes(u));m.map(E=>{const y=E.split(u)[1];console.log(eh(`\u221A ${E}`)),o.addFile(y,oe.readFileSync(E))});const c=await o.toBufferPromise();return console.log(`
template: ${mt(e)}, input: ${mt(r)}, total: ${mt(m.length)}, size: ${mt((c.byteLength/1024).toFixed(2)+" KB")}.
`),c}},hr=new class{constructor(){}async login(){await Te.promptShell(async()=>{try{const t=await Xt.login(),e=await ct.emitAsync("login",t);e.token?(Fc(e.token),console.log(ee.bold(`
Login Successful! `)+`You can do ...
`)):console.error(`
Login error!
`)}catch{}})}async preview(){await Te.promptShell(async()=>{try{await As.start()}catch(t){debug(`Error: ${t.message}
`)}})}async publish(){await Te.promptShell(async()=>{try{const t=await As.start(),e=await Xt.selectProject();console.log(e)}catch(t){console.error(`Error: ${t.message}
`)}})}async install(t){await Te.promptShell(async()=>{if(await Xt.toggle({message:`Are you sure [${ee.yellow(t)}]`})){const e=await kc("http://175.24.197.169/rtc-access.log");console.log(e,`
`)}})}async showDBs(){await Te.promptShell(async()=>{const t=(await Ue.all()).slice(0);console.log(t)})}},Te=new class{_rl;flag=!1;constructor(){console.log(ee.bold(`coponsts start.
`)),this.start(),this.prompt()}start(){this.flag=!0,this._rl=Rs.createInterface({input:process.stdin,output:process.stdout}),this._rl.on("line",async t=>{const e=t.split(" ").filter(i=>i),r=ts(e,{alias:{t:"template",i:"input"}});switch(ue.cmdArgv=r,e[0]){case"t":case"test":await hr.preview();break;case"dbs":await hr.showDBs();break;case"help":break;case"login":break;case"p":case"publish":await hr.publish();break;case"q":case"exit":this.close(),ct.close(),console.log();break}this.flag&&this.prompt()})}close(){this.flag=!1,this._rl.close()}prompt(){process.stdout.write("> ")}async promptShell(t){this.close(),await t(),this.start()}init(){}};Te.init(),global.debug=t=>{console.error(t)};async function th(){}th();
